{"version":3,"sources":["webpack:///./src/gdm-manage-step.vue?f88a","webpack:///./src/gdm-manage-step.vue?471c","webpack:///./src/gdm-manage-step.vue?0235","webpack:///./src/gdm-manage-step.vue?423f","webpack:///./src/gdm-manage-step.vue?13c0","webpack:///src/gdm-manage-step.vue","webpack:///./src/gdm-manage-step.vue"],"names":["content","__esModule","default","module","i","locals","exports","add","___CSS_LOADER_API_IMPORT___","push","name","components","props","api","type","serviceId","computed","created","this","getSteps","mounted","destroyed","data","steps","mode","newStep","stp_name","stp_title","stp_description","methods","$el","querySelectorAll","length","$http","post","emulateJSON","credentials","then","get","display","response","body","displayForm","edit","index","console","$set","error","alert","moveDown","step1","step2","reverse","moveUp","remove","step_id","reset","save","step","component","_vm","_h","$createElement","_c","_self","staticClass","_l","attrs","_v","directives","rawName","value","expression","domProps","on","$event","target","composing","_s","_e","staticStyle","class"],"mappings":"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","file":"8.gdm-search-components-vjs.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./gdm-manage-step.vue?vue&type=style&index=0&lang=css&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"aecb1af2\", content, true, {});","export * from \"-!../node_modules/vue-style-loader/index.js!../node_modules/css-loader/dist/cjs.js!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./gdm-manage-step.vue?vue&type=style&index=0&lang=css&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n.gdm-step {\\n  width: 400px;\\n  border: 1px dotted grey;\\n  padding: 5px 10px;\\n  min-height: 25px;\\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.85);\\n  margin: 5px 0;\\n}\\n.gdm-step label {\\n  display: inline-block;\\n  min-width: 120px;\\n  width: 120px;\\n  text-align:right;\\n  font-weight: 800;\\n  vertical-align:top;\\n}\\n.gdm-step input[type=\\\"text\\\"],\\n.gdm-step textarea {\\n min-width: 250px;\\n}\\n.gdm-step textarea {\\n  padding:6px;\\n}\\n.gdm-step .gdm-button-serie {\\n   margin: 10px 0 10px 125px;\\n}\\n.gdm-manage-step input[type=\\\"submit\\\"].gdm-button {\\n  font-family:inherit;\\n  opacity:1;\\n  font-size: inherit;\\n}\\n.gdm-manage-step span.gdm-button,\\n.gdm-manage-step input.gdm-button {\\n  \\n  cursor: pointer;\\n  border: 1px solid grey;\\n  border-radius: 3px;\\n  padding: 3px;\\n  background: #eee;\\n  opacity:0.8;\\n  min-width: 16px;\\n  text-align: center;\\n   box-shadow: 0 1px 2px rgba(0, 0, 0, 0.65);\\n}\\n.gdm-step span.gdm-button.gdm-disable {\\n  pointer-events: none;\\n  opacity: 0.5;\\n}\\n.gdm-step span.gdm-button:hover {\\n  opacity: 1;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"gdm-manage-step\"},[_vm._l((_vm.steps),function(step,index){return _c('div',{staticClass:\"gdm-step\"},[(!_vm.steps[index].edit)?_c('span',[_vm._v(_vm._s(step.stp_name))]):_c('div',[_c('form',{attrs:{\"id\":'form_' + index}},[_c('label',[_vm._v(\"Identifiant\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(step.stp_name),expression:\"step.stp_name\"}],attrs:{\"type\":\"text\",\"pattern\":\"[a-zA-Z0-9_-]{3,30}\",\"title\":\"Chaîne alphanumérique  entre 3 et 20 caractères\"},domProps:{\"value\":(step.stp_name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(step, \"stp_name\", $event.target.value)}}}),_vm._v(\" \"),_c('label',[_vm._v(\"Titre\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(step.stp_title),expression:\"step.stp_title\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(step.stp_title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(step, \"stp_title\", $event.target.value)}}}),_vm._v(\" \"),_c('label',[_vm._v(\"Description\")]),_vm._v(\" \"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(step.stp_description),expression:\"step.stp_description\"}],domProps:{\"value\":(step.stp_description)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(step, \"stp_description\", $event.target.value)}}}),_vm._v(\" \"),_c('div',{staticClass:\"gdm-button-serie\"},[_c('span',{staticClass:\"gdm-button\",on:{\"click\":function($event){return _vm.reset(index)}}},[_vm._v(\"Annuler\")]),_vm._v(\" \"),_c('span',{staticClass:\"gdm-button\",on:{\"click\":function($event){return _vm.save(index)}}},[_vm._v(\"Enregistrer\")])])])]),_vm._v(\" \"),(!_vm.steps[index].edit)?_c('div',{staticStyle:{\"float\":\"right\"}},[_c('span',{staticClass:\"fa fa-pencil gdm-button\",on:{\"click\":function($event){return _vm.edit(index)}}}),_vm._v(\" \"),_c('span',{staticClass:\"fa fa-arrow-up gdm-button\",class:{'gdm-disable': index === 0 },on:{\"click\":function($event){return _vm.moveUp(index)}}}),_vm._v(\" \"),_c('span',{staticClass:\"fa fa-arrow-down gdm-button\",class:{'gdm-disable': index === _vm.steps.length - 1 },on:{\"click\":function($event){return _vm.moveDown(index)}}}),_vm._v(\" \"),_c('span',{staticClass:\"fa fa-close gdm-button\",on:{\"click\":function($event){return _vm.remove(index)}}})]):_vm._e()])}),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"20px\"}},[(_vm.mode !== 'add')?_c('div',[_c('span',{staticClass:\"gdm-button\",on:{\"click\":_vm.displayForm}},[_vm._v(\"Ajouter\")])]):_c('div',{staticClass:\"gdm-step\"},[_c('form',{attrs:{\"id\":\"form_new\"}},[_c('label',[_vm._v(\"Identifiant\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newStep.stp_name),expression:\"newStep.stp_name\"}],attrs:{\"type\":\"text\",\"name\":\"\",\"pattern\":\"[a-zA-Z0-9_-]{3,30}\",\"title\":\"Chaîne alphanumérique  entre 3 et 20 caractères\"},domProps:{\"value\":(_vm.newStep.stp_name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.newStep, \"stp_name\", $event.target.value)}}}),_vm._v(\" \"),_c('label',[_vm._v(\"Titre\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newStep.stp_title),expression:\"newStep.stp_title\"}],attrs:{\"type\":\"text\",\"name\":\"\"},domProps:{\"value\":(_vm.newStep.stp_title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.newStep, \"stp_title\", $event.target.value)}}}),_vm._v(\" \"),_c('label',[_vm._v(\"Description\")]),_vm._v(\" \"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newStep.stp_description),expression:\"newStep.stp_description\"}],domProps:{\"value\":(_vm.newStep.stp_description)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.newStep, \"stp_description\", $event.target.value)}}}),_vm._v(\" \"),_c('div',{staticClass:\"gdm-button-serie\"},[_c('span',{staticClass:\"gdm-button\",on:{\"click\":function($event){return _vm.reset(null)}}},[_vm._v(\"Annuler\")]),_vm._v(\" \"),_c('span',{staticClass:\"gdm-button\",on:{\"click\":function($event){return _vm.add()}}},[_vm._v(\"Enregistrer\")])])])])])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./gdm-manage-step.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./gdm-manage-step.vue?vue&type=script&lang=js&\"","<template>\n <span class=\"gdm-manage-step\">\n <div v-for=\"(step, index) in steps\" class=\"gdm-step\">\n   <span v-if=\"!steps[index].edit\">{{step.stp_name}}</span>\n   <div v-else>\n     <form :id=\"'form_' + index\">\n      <label>Identifiant</label>\n      <input type=\"text\"  v-model=\"step.stp_name\" pattern=\"[a-zA-Z0-9_-]{3,30}\" title=\"Chaîne alphanumérique  entre 3 et 20 caractères\">\n      <label>Titre</label>\n      <input type=\"text\"  v-model=\"step.stp_title\"  >\n      <label>Description</label>\n      <textarea v-model=\"step.stp_description\"></textarea>\n      <div class=\"gdm-button-serie\" >\n      <span class=\"gdm-button\" @click=\"reset(index)\">Annuler</span>\n      <span  class=\"gdm-button\" @click=\"save(index)\">Enregistrer</span>\n      </div>\n    </form>\n   </div>\n   <div style=\"float:right;\" v-if=\"!steps[index].edit\">\n\t   <span class=\"fa fa-pencil gdm-button\" @click=\"edit(index)\"></span>\n\t   <span class=\"fa fa-arrow-up gdm-button\" :class=\"{'gdm-disable': index === 0 }\" @click=\"moveUp(index)\" ></span>\n\t   <span class=\"fa fa-arrow-down gdm-button\" :class=\"{'gdm-disable': index === steps.length - 1 }\" @click=\"moveDown(index)\"></span>\n\t   <span class=\"fa fa-close gdm-button\" @click=\"remove(index)\"></span> \n   </div>\n </div>\n <div style=\"margin-top:20px;\">\n\t <div v-if=\"mode !== 'add'\">\n\t    <span class=\"gdm-button\"  @click=\"displayForm\" >Ajouter</span>\n\t </div>\n\t <div v-else class=\"gdm-step\">\n\t   <form id=\"form_new\">\n\t     <label>Identifiant</label>\n\t     <input type=\"text\" name=\"\" v-model=\"newStep.stp_name\" pattern=\"[a-zA-Z0-9_-]{3,30}\" title=\"Chaîne alphanumérique  entre 3 et 20 caractères\">\n\t       <label>Titre</label>\n       <input type=\"text\" name=\"\" v-model=\"newStep.stp_title\"  >\n      <label>Description</label>\n\t      <textarea v-model=\"newStep.stp_description\"></textarea>\n\t      <div class=\"gdm-button-serie\">\n\t\t      <span class=\"gdm-button\" @click=\"reset(null)\">Annuler</span>\n\t\t      <span class=\"gdm-button\" @click=\"add()\">Enregistrer</span>\n        </div>\n     </form>\n   </div>\n </div>\n </span>\n</template>\n<script>\n\nexport default {\n  name: 'GdmManageStep',\n  components: {\n  },\n  props: {\n\n    api: {\n      type: String,\n      default: null\n    },\n    serviceId: {\n      type: Number,\n      default: null\n    }\n  },\n  computed: {\n   \n  },\n  created () {\n    this.getSteps()\n  },\n  mounted () {\n  },\n  destroyed () {\n  },\n\n  data() {\n    return {\n      steps: [],\n      mode: null,\n      newStep: {\n        stp_name: null,\n        stp_title: null,\n        stp_description: null\n      }\n    }\n  },\n  methods: {\n    add () {\n      var nodes = this.$el.querySelectorAll('#form_new input:invalid')\n      if (nodes.length > 0) {\n        return\n      }\n      if (this.api && this.serviceId) {\n        this.$http.post(\n            this.api + '/add/' + this.serviceId, \n            this.newStep, \n            { emulateJSON: true,\n              credentials: true})\n        .then(\n            response => this.display(response),\n            response => this.error(response)\n        )\n      }\n    },\n    getSteps () {\n      if (this.api && this.serviceId) {\n        this.$http.get(this.api + '/get/' + this.serviceId, {credentials: true})\n        .then(\n            response => this.display(response),\n            response => this.error(response)\n        )\n      }\n    },\n    display (response) {\n      this.mode = null\n      this.newStep = {\n        stp_name: null,\n        stp_title: null,\n        stp_description: null\n      }\n      this.steps = response.body\n    },\n    displayForm () {\n      this.mode = 'add'\n    },\n    edit (index) {\n      console.log(index)\n      this.$set(this.steps[index], 'edit' ,true)\n    },\n    error (response) {\n      switch(response.status) {\n      case 403:\n        alert('Accès interdit: déconnecté?')\n        break\n      case 402:\n        alert(\"Vous n'avez pas l'autorisation d'éditer ce service\")\n        break\n      }\n      \n    },\n    moveDown (index) {\n      var step1 = this.steps[index]\n      var step2 = this.steps[index + 1]\n      this.reverse(step1, step2)\n    },\n    moveUp (index) {\n      var step1 = this.steps[index -1]\n      var step2 = this.steps[index]\n      this.reverse(step1, step2)\n    },\n    remove (index) {\n      if (this.api && this.serviceId) {\n        this.$http.post(\n            this.api + '/remove/' + this.serviceId, \n            {step_id: this.steps[index]['stp_id']}, \n            { emulateJSON: true,\n              credentials: true})\n        .then(\n            response => this.display(response),\n            response => this.error(response)\n        )\n      }\n    },\n    reverse (step1, step2) {\n      if (this.api && this.serviceId) {\n        this.$http.post(\n            this.api + '/reverse/' + this.serviceId, \n            {step1: step1, step2: step2}, \n            { emulateJSON: true,\n              credentials: true})\n        .then(\n            response => this.display(response),\n            response => this.error(response)\n        )\n      }\n    },\n\n    reset (index) {\n      if (index === null) {\n        this.mode = null\n      } else {\n        this.$set(this.steps[index], 'edit' ,false)\n      }\n    },\n    save (index) {\n      var step = this.steps[index]\n      var nodes = this.$el.querySelectorAll('#form_' + index + ' input:invalid')\n      if (nodes.length > 0) {\n        return\n      }\n      delete step.edit\n      if (this.api && this.serviceId) {\n        this.$http.post(\n            this.api + '/update/' + this.serviceId, \n            step, \n            { emulateJSON: true,\n              credentials: true})\n        .then(\n            response => this.display(response),\n            response => this.error(response)\n        )\n      }\n    }\n   \n  \n  }\n}\n</script>\n<style>\n.gdm-step {\n  width: 400px;\n  border: 1px dotted grey;\n  padding: 5px 10px;\n  min-height: 25px;\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.85);\n  margin: 5px 0;\n}\n.gdm-step label {\n  display: inline-block;\n  min-width: 120px;\n  width: 120px;\n  text-align:right;\n  font-weight: 800;\n  vertical-align:top;\n}\n.gdm-step input[type=\"text\"],\n.gdm-step textarea {\n min-width: 250px;\n\n}\n.gdm-step textarea {\n  padding:6px;\n}\n.gdm-step .gdm-button-serie {\n   margin: 10px 0 10px 125px;\n}\n.gdm-manage-step input[type=\"submit\"].gdm-button {\n  font-family:inherit;\n  opacity:1;\n  font-size: inherit;\n  }\n.gdm-manage-step span.gdm-button,\n.gdm-manage-step input.gdm-button {\n  \n  cursor: pointer;\n  border: 1px solid grey;\n  border-radius: 3px;\n  padding: 3px;\n  background: #eee;\n  opacity:0.8;\n  min-width: 16px;\n  text-align: center;\n   box-shadow: 0 1px 2px rgba(0, 0, 0, 0.65);\n}\n.gdm-step span.gdm-button.gdm-disable {\n  pointer-events: none;\n  opacity: 0.5;\n}\n.gdm-step span.gdm-button:hover {\n  opacity: 1;\n}\n</style>","import { render, staticRenderFns } from \"./gdm-manage-step.vue?vue&type=template&id=fff530ce&\"\nimport script from \"./gdm-manage-step.vue?vue&type=script&lang=js&\"\nexport * from \"./gdm-manage-step.vue?vue&type=script&lang=js&\"\nimport style0 from \"./gdm-manage-step.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}