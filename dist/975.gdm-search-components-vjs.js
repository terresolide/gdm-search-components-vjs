(self.webpackChunkgdm_search_components_vjs=self.webpackChunkgdm_search_components_vjs||[]).push([[975],{1839:(e,t,s)=>{(t=s(3645)(!1)).push([e.id,'\n.job-header {\n  display:flex;\n}\n.job-header > div {\n  padding: 0 10px 0 0;\n  flex-grow:1;\n}\n.job-header h2,\n.job-content h1 {\n  color:black;\n  font-size:20px;\n  font-family: "Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif;\n}\n.job-content h1 {\n  font-size: 24px;\n}\n.user-search {\n   margin:auto;\n   margin-bottom:20px;\n   text-align: left;\n   display: inline-block;\n   background: #F5f5f5;\n   margin-bottom: 40px;\n   margin-left: calc(50% - 225px);\n   padding: 10px;\n   border: 1px solid grey;\n   border-radius: 5px;\n}\n.user-search-large {\n   margin-left:5px;\n}\n.user-search > div {\n   display: inline-block;\n}\n.user-search label {\n   margin-left:10px;\n   font-weight: 700;\n}\nul.menu-content {\n  border-bottom: 1px solid #adadad;\n}\nul.menu-content li {\n  display: inline-block;\n\tmin-width: 50px;\n\tfont-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n\tborder: 1px solid #adadad;\n\tborder-bottom: none;\n\ttext-align: center;\n\tcolor: black;\n\theight: 30px;\n\tvertical-align: middle;\n\tmargin: 0;\n\tbackground: #efefef;\n\tcursor:pointer;\n}\nul.menu-content li span {\n   text-transform: capitalize;\nvertical-align: middle;\nfont-size: 1.1rem;\nheight: 30px;\nmin-width: 50px;\ncolor: black;\npadding: 5px 10px 0 10px;\ntext-decoration: none;\ndisplay: inline-block;\n}\n/* ul.menu-content li{\n    text-transform: capitalize;\n    vertical-align: middle;\n    font-size: 1.1rem;\n    height: 30px;\n    min-width:50px;\n    color:black;\n    padding: 5px 10px 0 10px;\n    text-decoration: none;\n    display:inline-block;\n} */\nul.menu-content li:hover {\n  color:#b8412c;\n}\nul.menu-content li.selected  span {\n  background:white;\n  color:#b8412c;\n}\nul.menu-content li.isDisabled {\n  pointer-events: none;\n  color:grey;\n}\n',""]),e.exports=t},9662:(e,t,s)=>{"use strict";var o,a,n;n=function(e){function t(e,t,s,o){e.hasOwnProperty(t)||(e[t]=o.apply(null,s))}t(e=e?e._modules:{},"Extensions/DownloadURL.js",[e["Core/Globals.js"]],(function(e){var t=e.isSafari,s=e.win,o=s.document,a=s.URL||s.webkitURL||s,n=e.dataURLtoBlob=function(e){if((e=e.replace(/filename=.*;/,"").match(/data:([^;]*)(;base64)?,([0-9A-Za-z+/]+)/))&&3<e.length&&s.atob&&s.ArrayBuffer&&s.Uint8Array&&s.Blob&&a.createObjectURL){var t=s.atob(e[3]),o=new s.ArrayBuffer(t.length);o=new s.Uint8Array(o);for(var n=0;n<o.length;++n)o[n]=t.charCodeAt(n);return e=new s.Blob([o],{type:e[1]}),a.createObjectURL(e)}};return e=e.downloadURL=function(e,a){var r=s.navigator,i=o.createElement("a");if("string"==typeof e||e instanceof String||!r.msSaveOrOpenBlob){if(e=""+e,r=/Edge\/\d+/.test(r.userAgent),(t&&"string"==typeof e&&0===e.indexOf("data:application/pdf")||r||2e6<e.length)&&!(e=n(e)||""))throw Error("Failed to convert to blob");if(void 0!==i.download)i.href=e,i.download=a,o.body.appendChild(i),i.click(),o.body.removeChild(i);else try{if(null==s.open(e,"chart"))throw Error("Failed to open window")}catch(t){s.location.href=e}}else r.msSaveOrOpenBlob(e,a)},{dataURLtoBlob:n,downloadURL:e}})),t(e,"Extensions/ExportData.js",[e["Core/Axis/Axis.js"],e["Core/Chart/Chart.js"],e["Core/Renderer/HTML/AST.js"],e["Core/Globals.js"],e["Core/DefaultOptions.js"],e["Core/Utilities.js"],e["Extensions/DownloadURL.js"]],(function(e,t,s,o,a,n,r){function i(e,t){var s=u.navigator,o=-1<s.userAgent.indexOf("WebKit")&&0>s.userAgent.indexOf("Chrome"),a=u.URL||u.webkitURL||u;try{if(s.msSaveOrOpenBlob&&u.MSBlobBuilder){var n=new u.MSBlobBuilder;return n.append(e),n.getBlob("image/svg+xml")}if(!o)return a.createObjectURL(new u.Blob(["\ufeff"+e],{type:t}))}catch(e){}}var c=o.doc,l=o.seriesTypes,u=o.win;o=a.getOptions,a=a.setOptions;var d=n.addEvent,p=n.defined,v=n.extend,h=n.find,_=n.fireEvent,f=n.isNumber,m=n.pick,y=r.downloadURL;a({exporting:{csv:{annotations:{itemDelimiter:"; ",join:!1},columnHeaderFormatter:null,dateFormat:"%Y-%m-%d %H:%M:%S",decimalPoint:null,itemDelimiter:null,lineDelimiter:"\n"},showTable:!1,useMultiLevelHeaders:!0,useRowspanHeaders:!0},lang:{downloadCSV:"Download CSV",downloadXLS:"Download XLS",exportData:{annotationHeader:"Annotations",categoryHeader:"Category",categoryDatetimeHeader:"DateTime"},viewData:"View data table",hideData:"Hide data table"}}),d(t,"render",(function(){this.options&&this.options.exporting&&this.options.exporting.showTable&&!this.options.chart.forExport&&!this.dataTableDiv&&this.viewData()})),t.prototype.setUpKeyToAxis=function(){l.arearange&&(l.arearange.prototype.keyToAxis={low:"y",high:"y"}),l.gantt&&(l.gantt.prototype.keyToAxis={start:"x",end:"x"})},t.prototype.getDataRows=function(t){var s,o=this.hasParallelCoordinates,a=this.time,n=this.options.exporting&&this.options.exporting.csv||{},r=this.xAxis,i={},c=[],l=[],u=[],d=this.options.lang.exportData,v=d.categoryHeader,y=d.categoryDatetimeHeader,g=function(s,o,a){if(n.columnHeaderFormatter){var r=n.columnHeaderFormatter(s,o,a);if(!1!==r)return r}return s?s instanceof e?s.options.title&&s.options.title.text||(s.dateTime?y:v):t?{columnTitle:1<a?o:s.name,topLevelColumnTitle:s.name}:s.name+(1<a?" ("+o+")":""):v},b=function(e,t,s){var o={},a={};return t.forEach((function(t){var n=(e.keyToAxis&&e.keyToAxis[t]||t)+"Axis";n=f(s)?e.chart[n][s]:e[n],o[t]=n&&n.categories||[],a[t]=n&&n.dateTime})),{categoryMap:o,dateTimeValueAxisMap:a}},S=[],x=0;for(w in this.setUpKeyToAxis(),this.series.forEach((function(e){var c,d=e.xAxis,p=e.options.keys||function(e,t){return e.data.filter((function(e){return void 0!==e.y&&e.name})).length&&t&&!t.categories&&!e.keyToAxis?e.pointArrayMap&&e.pointArrayMap.filter((function(e){return"x"===e})).length?(e.pointArrayMap.unshift("x"),e.pointArrayMap):["x","y"]:e.pointArrayMap||["y"]}(e,d),v=p.length,_=!e.requireSorting&&{},f=r.indexOf(d),y=b(e,p);if(!1!==e.options.includeInDataExport&&!e.options.isInternal&&!1!==e.visible){for(h(S,(function(e){return e[0]===f}))||S.push([f,x]),c=0;c<v;)s=g(e,p[c],p.length),u.push(s.columnTitle||s),t&&l.push(s.topLevelColumnTitle||s),c++;var w={chart:e.chart,autoIncrement:e.autoIncrement,options:e.options,pointArrayMap:e.pointArrayMap};e.options.data.forEach((function(t,s){o&&(y=b(e,p,s));var r={series:w};e.pointClass.prototype.applyOptions.apply(r,[t]),t=r.x;var l=e.data[s]&&e.data[s].name;for(c=0,(!d||"name"===e.exportKey||!o&&d&&d.hasNames&&l)&&(t=l),_&&(_[t]&&(t+="|"+s),_[t]=!0),i[t]||(i[t]=[],i[t].xValues=[]),i[t].x=r.x,i[t].name=l,i[t].xValues[f]=r.x;c<v;)l=r[s=p[c]],i[t][x+c]=m(y.categoryMap[s][l],y.dateTimeValueAxisMap[s]?a.dateFormat(n.dateFormat,l):null,l),c++})),x+=c}})),i)Object.hasOwnProperty.call(i,w)&&c.push(i[w]);var w=t?[l,u]:[u];for(x=S.length;x--;){var D=S[x][0],T=S[x][1],j=r[D];c.sort((function(e,t){return e.xValues[D]-t.xValues[D]})),d=g(j),w[0].splice(T,0,d),t&&w[1]&&w[1].splice(T,0,d),c.forEach((function(e){var t=e.name;j&&!p(t)&&(j.dateTime?(e.x instanceof Date&&(e.x=e.x.getTime()),t=a.dateFormat(n.dateFormat,e.x)):t=j.categories?m(j.names[e.x],j.categories[e.x],e.x):e.x),e.splice(T,0,t)}))}return w=w.concat(c),_(this,"exportData",{dataRows:w}),w},t.prototype.getCSV=function(e){var t="",s=this.getDataRows(),o=this.options.exporting.csv,a=m(o.decimalPoint,","!==o.itemDelimiter&&e?1.1.toLocaleString()[1]:"."),n=m(o.itemDelimiter,","===a?";":","),r=o.lineDelimiter;return s.forEach((function(e,o){for(var i,c=e.length;c--;)"string"==typeof(i=e[c])&&(i='"'+i+'"'),"number"==typeof i&&"."!==a&&(i=i.toString().replace(".",a)),e[c]=i;t+=e.join(n),o<s.length-1&&(t+=r)})),t},t.prototype.getTable=function(e){var t=function(e){if(!e.tagName||"#text"===e.tagName)return e.textContent||"";var s=e.attributes,o="<"+e.tagName;return s&&Object.keys(s).forEach((function(e){o+=" "+e+'="'+s[e]+'"'})),o+=">",o+=e.textContent||"",(e.children||[]).forEach((function(e){o+=t(e)})),o+="</"+e.tagName+">"};return e=this.getTableAST(e),t(e)},t.prototype.getTableAST=function(e){var t=0,s=[],o=this.options,a=e?1.1.toLocaleString()[1]:".",n=m(o.exporting.useMultiLevelHeaders,!0);e=this.getDataRows(n);var r=n?e.shift():null,i=e.shift(),c=function(e,t,s,o){var n=m(o,"");return t="text"+(t?" "+t:""),"number"==typeof n?(n=n.toString(),","===a&&(n=n.replace(".",a)),t="number"):o||(t="empty"),{tagName:e,attributes:s=v({class:t},s),textContent:n}};!1!==o.exporting.tableCaption&&s.push({tagName:"caption",attributes:{class:"highcharts-table-caption"},textContent:m(o.exporting.tableCaption,o.title.text?o.title.text:"Chart")});for(var l=0,u=e.length;l<u;++l)e[l].length>t&&(t=e[l].length);s.push(function(e,t,s){var a=[],r=0;s=s||t&&t.length;var i,l=0;if(i=n&&e&&t){e:if(i=e.length,t.length===i){for(;i--;)if(e[i]!==t[i]){i=!1;break e}i=!0}else i=!1;i=!i}if(i){for(i=[];r<s;++r){var u=e[r],d=e[r+1];u===d?++l:l?(i.push(c("th","highcharts-table-topheading",{scope:"col",colspan:l+1},u)),l=0):(u===t[r]?o.exporting.useRowspanHeaders?(d=2,delete t[r]):(d=1,t[r]=""):d=1,u=c("th","highcharts-table-topheading",{scope:"col"},u),1<d&&u.attributes&&(u.attributes.valign="top",u.attributes.rowspan=d),i.push(u))}a.push({tagName:"tr",children:i})}if(t){for(i=[],r=0,s=t.length;r<s;++r)void 0!==t[r]&&i.push(c("th",null,{scope:"col"},t[r]));a.push({tagName:"tr",children:i})}return{tagName:"thead",children:a}}(r,i,Math.max(t,i.length)));var d=[];return e.forEach((function(e){for(var s=[],o=0;o<t;o++)s.push(c(o?"td":"th",null,o?{}:{scope:"row"},e[o]));d.push({tagName:"tr",children:s})})),s.push({tagName:"tbody",children:d}),s={tree:{tagName:"table",id:"highcharts-data-table-"+this.index,children:s}},_(this,"aftergetTableAST",s),s.tree},t.prototype.downloadCSV=function(){var e=this.getCSV(!0);y(i(e,"text/csv")||"data:text/csv,\ufeff"+encodeURIComponent(e),this.getFilename()+".csv")},t.prototype.downloadXLS=function(){var e='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>Ark1</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e<style>td{border:none;font-family: Calibri, sans-serif;} .number{mso-number-format:"0.00";} .text{ mso-number-format:"@";}</style><meta name=ProgId content=Excel.Sheet><meta charset=UTF-8></head><body>'+this.getTable(!0)+"</body></html>";y(i(e,"application/vnd.ms-excel")||"data:application/vnd.ms-excel;base64,"+u.btoa(unescape(encodeURIComponent(e))),this.getFilename()+".xls")},t.prototype.viewData=function(){this.toggleDataTable(!0)},t.prototype.hideData=function(){this.toggleDataTable(!1)},t.prototype.toggleDataTable=function(e){(e=m(e,!this.isDataTableVisible))&&!this.dataTableDiv&&(this.dataTableDiv=c.createElement("div"),this.dataTableDiv.className="highcharts-data-table",this.renderTo.parentNode.insertBefore(this.dataTableDiv,this.renderTo.nextSibling)),this.dataTableDiv&&(this.dataTableDiv.style.display=e?"block":"none",e&&(this.dataTableDiv.innerHTML=s.emptyHTML,new s([this.getTableAST()]).addToDOM(this.dataTableDiv),_(this,"afterViewData",this.dataTableDiv))),this.isDataTableVisible=e,e=this.exportDivElements;var t=this.options.exporting,o=t&&t.buttons&&t.buttons.contextButton.menuItems;t=this.options.lang,g&&g.menuItemDefinitions&&t&&t.viewData&&t.hideData&&o&&e&&(e=e[o.indexOf("viewData")])&&s.setElementHTML(e,this.isDataTableVisible?t.hideData:t.viewData)};var g=o().exporting;g&&(v(g.menuItemDefinitions,{downloadCSV:{textKey:"downloadCSV",onclick:function(){this.downloadCSV()}},downloadXLS:{textKey:"downloadXLS",onclick:function(){this.downloadXLS()}},viewData:{textKey:"viewData",onclick:function(){this.toggleDataTable()}}}),g.buttons&&g.buttons.contextButton.menuItems.push("separator","downloadCSV","downloadXLS","viewData")),l.map&&(l.map.prototype.exportKey="name"),l.mapbubble&&(l.mapbubble.prototype.exportKey="name"),l.treemap&&(l.treemap.prototype.exportKey="name")})),t(e,"masters/modules/export-data.src.js",[],(function(){}))},e.exports?(n.default=n,e.exports=n):(o=[s(8840),s(8393)],void 0===(a=function(e){return n(e),n.Highcharts=e,n}.apply(t,o))||(e.exports=a))},7975:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var o=s(8840),a=s(8393),n=s.n(a),r=s(9662),i=s.n(r),c=s(2929),l=s.n(c),u=s(381),d=s.n(u);const p={name:"GdmStatForm",props:{mode:{type:String,default:"connection"},services:{type:Array,default:function(){return[]}},groups:{type:Object,default:function(){}}},watch:{mode:function(e){this.search()}},computed:{selectedName:function(){var e=this;if(""!==this.selectedService){var t=this.services.find((function(t){return t.id===e.selectedService}));if(t)return"Jobs pour le service "+t.name}return""!==this.selectedGroup?"Jobs pour les services "+this.selectedGroup:"Jobs pour tous les services"}},data:function(){return{by:"day",startDate:null,endDate:null,group:"type",groupBy:"service",status:"",selectedService:"",selectedServices:[],selectedGroup:"",userType:null}},created:function(){this.by="day",this.startDate=d()().startOf("month").format("YYYY-MM-DD"),this.endDate=d()().endOf("month").format("YYYY-MM-DD"),this.selectedServices=this.services,this.search()},methods:{details:function(){var e={};if(this.startDate&&(e.startDate=this.startDate),this.endDate&&(e.endDate=this.endDate),""!==this.status&&(e.status=this.status),""!==this.selectedService)e.service=this.selectedService;else if(""!==this.selectedGroup){var t=this.selectedServices.map((function(e){return e.id}));e.service=t.join(",")}return e.groupBy=this.groupBy,this.group&&(e.group=this.group),e.by=this.by,e},search:function(){this.$emit("search",this.details())},changeGroup:function(){""!==this.selectedGroup?(this.selectedService="",this.selectedServices=this.groups[this.selectedGroup]):this.selectedServices=this.services,this.$emit("servicesChange",this.selectedServices),this.search()},draw:function(){this.$emit("draw",this.details())}}};var v=s(1900);const h=(0,v.Z)(p,(function(){var e=this,t=e._self._c;return t("span",[t("div",{staticStyle:{"margin-left":"20px"}},["service"!==e.mode?t("div",{staticClass:"user-search",class:{"user-search-large":"job"===e.mode||"product"===e.mode||"ciest2"===e.mode}},[t("label",[e._v("Du")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.startDate,expression:"startDate"}],attrs:{type:"date"},domProps:{value:e.startDate},on:{change:function(t){return e.search()},input:function(t){t.target.composing||(e.startDate=t.target.value)}}}),e._v(" "),t("label",[e._v("au")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.endDate,expression:"endDate"}],attrs:{type:"date"},domProps:{value:e.endDate},on:{change:function(t){return e.search()},input:function(t){t.target.composing||(e.endDate=t.target.value)}}}),e._v(" "),t("label",[e._v("Par")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.by,expression:"by"}],on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.by=t.target.multiple?s:s[0]},function(t){return e.draw()}]}},[t("option",{attrs:{value:"day"}},[e._v("Jour")]),e._v(" "),t("option",{attrs:{value:"month"}},[e._v("Mois")]),e._v(" "),t("option",{attrs:{value:"year"}},[e._v("Year")])]),e._v(" "),"connection"===e.mode?t("span",[t("label",[e._v("Par")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.group,expression:"group"}],on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.group=t.target.multiple?s:s[0]},function(t){return e.draw()}]}},[t("option",{attrs:{value:"type"}},[e._v("Type d'utilisateur")]),e._v(" "),t("option",{attrs:{value:"pole"}},[e._v("Pôle de données")])])]):e._e(),e._v(" "),"job"===e.mode||"ciest2"===e.mode?t("span",[t("label",[e._v("Statut")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.status,expression:"status"}],on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.status=t.target.multiple?s:s[0]},function(t){return e.search()}]}},[t("option",{attrs:{value:""}},[e._v("---")]),e._v(" "),t("option",{attrs:{value:"ended"}},[e._v("Terminé")]),e._v(" "),t("option",{attrs:{value:"success"}},[e._v("Terminé avec succès")]),e._v(" "),t("option",{attrs:{value:"failed"}},[e._v("En échec")]),e._v(" "),t("option",{attrs:{value:"aborted"}},[e._v("Abandonné")])])]):e._e(),e._v(" "),"job"===e.mode||"product"===e.mode||"ciest2"===e.mode?t("span",[t("label",[e._v("Groupe")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedGroup,expression:"selectedGroup"}],on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selectedGroup=t.target.multiple?s:s[0]},function(t){return e.changeGroup()}]}},[t("option",{attrs:{value:""}},[e._v("TOUS")]),e._v(" "),e._l(e.groups,(function(s,o){return t("option",{domProps:{value:o}},[e._v("\n            "+e._s(o)+"\n         ")])}))],2),e._v(" "),t("label",[e._v("Service")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedService,expression:"selectedService"}],on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selectedService=t.target.multiple?s:s[0]},function(t){return e.search()}]}},[t("option",{attrs:{value:""}},[e._v("TOUS")]),e._v(" "),e._l(e.selectedServices,(function(s){return t("option",{domProps:{value:s.id}},[e._v("\n            "+e._s(s.name)+"\n         ")])}))],2)]):e._e(),e._v(" "),"job"===e.mode?t("span",[t("label",[e._v("Regrouper par")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.groupBy,expression:"groupBy"}],on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.groupBy=t.target.multiple?s:s[0]},function(t){return e.search()}]}},[t("option",{attrs:{value:"service"}},[e._v("Service")]),e._v(" "),t("option",{attrs:{value:"type"}},[e._v("Type d'organisme")]),e._v(" "),t("option",{attrs:{value:"pole"}},[e._v("Pôle de données")])])]):e._e()]):e._e()])])}),[],!1,null,null,null).exports;function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}"object"===_(o)&&(n()(o),l()(o),i()(o));const f={name:"GdmStat",components:{GdmStatForm:h},props:{appUrl:{type:String,default:null}},computed:{},data:function(){return{startDate:null,endDate:null,by:"day",mode:"service",group:"type",groupBy:"service",serviceUsers:[],userTypes:[],poles:[],days:[],months:[],years:[],services:[],selectedServices:[],groups:{},sessions:null,newUsers:null,jobs:null,products:null,ciest2:null,download:null,status:"",totalUsers:0,disabledUsers:0,colors:["#2f7ed8","#910000","#8bbc21","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a","#0d233a"]}},created:function(){this.getClassification(),this.sessions={type:this.defaultData(),pole:this.defaultData()},this.newUsers={type:this.defaultData(),pole:this.defaultData()},this.jobs=this.defaultData(),this.products=this.defaultData(),this.ciest2=this.defaultData(),this.download=this.jobs=this.defaultData()},methods:{defaultData:function(){return{data:{days:{},months:{},years:{}},count:{},cost:{},countCost:{},duration:{},countDuration:{},countJobs:{},avg:{}}},selectedName:function(){return this.$refs&&this.$refs.form?this.$refs.form.selectedName:""},selectedService:function(){return this.$refs&&this.$refs.form?this.$refs.form.selectedService:""},initServices:function(e){this.selectedServices=e},nameByKey:function(e,t){return"pole"===t?this.poleName(e):this.userTypeName(e)},poleName:function(e){var t=this.poles.find((function(t){return t.po_id===e}));return t?t.po_name?t.po_name:t.po_description.fr:"inconnu"},userTypeName:function(e){var t=this.userTypes.find((function(t){return t.t_id===e}));if(t)return t.t_name_fr},draw:function(e){switch(this.group=e.group,this.mode){case"connection":this.drawConnection(e),this.drawNewUsers(e);break;case"services":this.drawServices(e);break;case"job":this.drawJobs(e);break;case"product":this.drawProducts(e);break;case"ciest2":this.drawCiest2(e),this.drawDownload(e)}},drawHistogram:function(e,t,s,a,n){var r=this.colors;n&&n.colors&&(r=n.colors),o.chart(e,{chart:{type:"column"},title:{text:t,align:"left",style:{color:"#000000",fontSize:"20px",fontWeight:700}},credits:{enabled:!1},colors:r,legend:{labelFormatter:function(){return this.name}},subtitle:{text:""},xAxis:{categories:s,crosshair:!0},yAxis:{min:0,allowDecimals:!1,title:{text:""}},tooltip:{formatter:function(e){var t=0,s="<b>"+this.x.replaceAll("-","/")+"</b><br />";return this.points.forEach((function(e,o){s+='<span style="color: '+e.color+'">●</span> '+a[o].name+": "+e.y+"<br/>",t+=e.y})),s+'<span style="margin-left:10px;font-weight:700">Total: </span>'+t},shared:!0,useHTML:!0},plotOptions:{column:{stacking:"normal",pointPadding:0,borderWidth:1,groupPadding:0,shadow:!1}},series:a})},drawPie:function(e,t,s,a){var n=this.colors;a.colors&&(n=a.colors),o.chart(e,{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:t},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},accessibility:{point:{valueSuffix:"%"}},credits:{enabled:!1},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",colors:n,dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %"}}},series:s})},drawNewUsers:function(e){var t=this[e.by+"s"],s=this.newUsers[e.group].data[e.by+"s"],o=[],a={};for(var n in s)if(o.push({name:this.nameByKey(n,e.group),data:s[n]}),"pole"===e.group){a.colors||(a.colors=[]);var r=this.poles.find((function(e){return e.po_id===n}));a.colors.push(r.po_color)}this.drawHistogram("newUsers","Histogramme des Nouveaux comptes",t,o,a)},drawConnection:function(e){var t=this[e.by+"s"],s=this.sessions[e.group].data[e.by+"s"],o=[],a={};for(var n in s)if(o.push({name:this.nameByKey(n,e.group),data:s[n]}),"pole"===e.group){a.colors||(a.colors=[]);var r=this.poles.find((function(e){return e.po_id===n}));a.colors.push(r.po_color)}this.drawHistogram("sessions","Histogramme de connexions",t,o,a)},drawJobs:function(e){var t=this[e.by+"s"],s=this.jobs.data[e.by+"s"],o=[],a=[],n="";for(var r in s){switch(e.groupBy){case"pole":var i=this.poles.find((function(e){return e.po_id===r}));a.push(i.po_color);case"type":n=this.nameByKey(r,e.groupBy);break;case"service":var c=this.services.find((function(e){return e.name===r}));n=r,a.push(c.color)}o.push({name:n,data:s[r]})}var l={};a.length>0&&(l={colors:a}),this.drawHistogram("jobs","Nombre de jobs",t,o,l)},drawProducts:function(e){var t=this[e.by+"s"],s=this.products.data[e.by+"s"],o=[],a=[],n="";for(var r in s){var i=this.services.find((function(e){return e.name===r}));n=r,a.push(i.color),o.push({name:n,data:s[r]})}var c={};a.length>0&&(c={colors:a}),this.drawHistogram("products","Nombre de produits",t,o,c)},drawCiest2:function(){var e=this[this.by+"s"],t=this.ciest2.data[this.by+"s"],s=[],o=[],a="";for(var n in t){var r=this.services.find((function(e){return e.name===n}));a=n,o.push(r.color),s.push({name:a,data:t[n]})}var i={};o.length>0&&(i={colors:o}),this.drawHistogram("ciest2","Activité CIEST2",e,s,i)},drawDownload:function(){var e=this[this.by+"s"],t=this.download.data[this.by+"s"],s=[];s.push({name:"Téléchargements",data:t}),this.drawHistogram("download","Téléchargement FTP",e,s,{})},getServices:function(){var e=this.appUrl+"/auth/getServices";this.$http.get(e).then((function(e){this.services=e.body.services,this.selectedServices=this.services;var t=this;this.services.forEach((function(e){t.groups[e.group]?t.groups[e.group].push(e):t.groups[e.group]=[e]}))}))},getClassification:function(){var e=this.appUrl+"/api/users/types?full=yes";this.$http.get(e,{}).then((function(e){this.initialize(e.body)}))},initialize:function(e){e.types&&(this.userTypes=e.types,this.poles=e.poles),this.getServices()},average:function(e,t){var s=0,o=0,a=0,n=0,r=0;switch(t){case"type":this.userTypes.forEach((function(t){s+=e.count[t.t_id],a+=e.countDuration[t.t_id],o+=e.duration[t.t_id],n+=e.cost[t.t_id],r+=e.countCost[t.t_id]}));break;case"pole":this.poles.forEach((function(t){s+=e.count[t.po_id],a+=e.countDuration[t.po_id],o+=e.duration[t.po_id],n+=e.cost[t.po_id],r+=e.countCost[t.po_id]}));break;default:this.selectedServices.forEach((function(t){s+=e.count[t.name],a+=e.countDuration[t.name],o+=e.duration[t.name],n+=e.cost[t.name],r+=e.countCost[t.name]}))}e.avg={count:s,cost:r>0?Math.round(n/r):0,duration:a>0?Math.round(o/a):0}},productsAverage:function(e){var t=this,s=0,o=0;this.selectedServices.forEach((function(e){o+=t.products.countJobs[e.name],s+=t.products.count[e.name]})),this.products.avg={countJobs:o,countProducts:s}},secondToStr:function(e){e=Math.round(e);var t=Math.floor(e/86400);e%=86400;var s=Math.floor(e/3600);e%=3600;var o=Math.floor(e/60),a=e%60;return(t>0?t+"j ":"")+s.toString().padStart(2,"0")+":"+o.toString().padStart(2,"0")+":"+a.toString().padStart(2,"0")},setMode:function(e){this.mode=e},search:function(e){if(this.appUrl)switch(this.mode){case"connection":this.searchConnection(e);break;case"service":this.searchService(e);break;case"job":this.searchJob(e);break;case"product":this.searchProduct(e);break;case"ciest2":this.searchCiest2(e)}},searchConnection:function(e){var t=this.appUrl+"/statistics/searchSession?",s=[];e.startDate&&s.push("start="+e.startDate),e.endDate&&s.push("end="+e.endDate),t+=s.join("&"),this.$http.get(t).then((function(t){this.treatmentConnection(t.body,e)}))},searchJob:function(e){var t=this.appUrl+"/statistics/searchJobs?",s=[];e.startDate&&s.push("start="+e.startDate),e.endDate&&s.push("end="+e.endDate),e.status&&s.push("status="+e.status),e.service&&s.push("service="+e.service),"service"!==e.groupBy&&s.push(e.groupBy+"=1"),t+=s.join("&"),this.$http.get(t).then((function(t){this.treatmentJobs(t.body,e)}))},searchProduct:function(e){var t=this.appUrl+"/statistics/countProducts?",s=[];e.startDate&&s.push("start="+e.startDate),e.endDate&&s.push("end="+e.endDate),e.service&&s.push("service="+e.service),t+=s.join("&"),this.$http.get(t).then((function(t){this.treatmentProducts(t.body,e)}))},searchService:function(){this.$http.get(this.appUrl+"/statistics/serviceUsers").then((function(e){this.treatmentServices(e.body)}))},searchCiest2:function(e){var t=this.appUrl+"/statistics/ciest?",s=[];e.startDate&&s.push("start="+e.startDate),e.endDate&&s.push("end="+e.endDate),""!==this.status&&s.push("status="+e.status),e.service&&s.push("service="+e.service),t+=s.join("&"),this.$http.get(t).then((function(t){this.treatmentCiest2(t.body,e)}))},extractSeriesFrom:function(e,t,s,o,a){o&&(this.days=[],this.months=[],this.years=[],t&&(s.cost={},s.count={},s.countCost={},s.duration={},s.countDuration={},s.countJobs={})),t?(s.count[t]=0,s.cost[t]=0,s.countCost[t]=0,s.duration[t]=0,s.countDuration[t]=0,s.countJobs[t]=0):(s.count=0,s.cost=0,s.countCost=0,s.duration=0,s.countDuration=0,s.countJobs=0);var n=d()(a.startDate,"YYYY-MM-DD"),r={days:[],months:[],years:[]},i=(n=d()(a.startDate,"YYYY-MM-DD"),this),c=n.year(),l=(n.month()+1).toString().padStart(2,"0")+"-"+c,u=null,p=null;o&&(this.years.push(c+""),this.months.push(l));var v=0,h=0;e.forEach((function(e){var a=e.year.toString()+e.month.toString().padStart(2,"0")+e.day.toString().padStart(2,"0"),_=d()(a,"YYYYMMDD");for(u=_.year(),p=(_.month()+1).toString().padStart(2,"0")+"-"+u;_.diff(n,"days")>0;)o&&i.days.push(n.format("DD-MM-YYYY")),r.days.push(0),n.add(1,"days"),u=n.year(),(p=(n.month()+1).toString().padStart(2,"0")+"-"+u)!==l&&(r.months.push(v),o&&i.months.push(p),l=p,v=0),u!==c&&(r.years.push(h),o&&i.years.push(u+""),c=u,h=0);o&&i.days.push(n.format("DD-MM-YYYY")),r.days.push(e.tot),t?s.count[t]=s.count[t]+e.tot:s.count=s.count+e.tot,e.cost&&t&&(s.cost[t]=s.cost[t]+e.cost,s.countCost[t]=s.countCost[t]+e.tot),e.count&&t&&(s.countJobs[t]=s.countJobs[t]+e.count),e.duration&&t&&(s.duration[t]=s.duration[t]+parseInt(e.duration),s.countDuration[t]=s.countDuration[t]+e.tot),v+=e.tot,h+=e.tot,p!==l&&(r.months.push(v),o&&i.months.push(p),l=p,v=0),u!==c&&(r.years.push(h),o&&i.years.push(u+""),c=u,h=0),n=_.add(1,"days")}));for(var _=d()(a.endDate,"YYYY-MM-DD");_.diff(n,"days")>=0;)o&&i.days.push(n.format("DD-MM-YYYY")),r.days.push(0),u=n.year(),(p=(n.month()+1).toString().padStart(2,"0")+"-"+u)!==l&&(r.months.push(v),o&&i.months.push(p),l=p,v=0),u!==c&&(r.years.push(h),o&&i.years.push(u+""),c=u,h=0),n.add(1,"days");return this.years.length>r.years.length&&r.years.push(h),this.months.length>r.months.length&&r.months.push(v),r},treatmentConnection:function(e,t){var s=this,o=!0;this.userTypes.forEach((function(a){var n=e.sessionByType.filter((function(e){return e.type===a.t_id})),r=s.extractSeriesFrom(n,a.t_id,s.sessions.type,o,t);o=!1,s.sessions.type.data.days[a.t_id]=r.days,s.sessions.type.data.months[a.t_id]=r.months,s.sessions.type.data.years[a.t_id]=r.years})),this.average(this.sessions.type,"type"),this.poles.forEach((function(a){var n=e.sessionByPole.filter((function(e){return e.pole===a.po_id})),r=s.extractSeriesFrom(n,a.po_id,s.sessions.pole,o,t);o=!1,s.sessions.pole.data.days[a.po_id]=r.days,s.sessions.pole.data.months[a.po_id]=r.months,s.sessions.pole.data.years[a.po_id]=r.years})),this.average(this.sessions.pole,"pole"),this.drawConnection(t),this.userTypes.forEach((function(o){var a=e.newUserByType.filter((function(e){return e.type===o.t_id})),n=s.extractSeriesFrom(a,o.t_id,s.newUsers.type,!1,t);s.newUsers.type.data.days[o.t_id]=n.days,s.newUsers.type.data.months[o.t_id]=n.months,s.newUsers.type.data.years[o.t_id]=n.years})),this.average(this.newUsers.type,"type"),this.poles.forEach((function(a){var n=e.newUserByPole.filter((function(e){return e.pole===a.po_id})),r=s.extractSeriesFrom(n,a.po_id,s.newUsers.pole,o,t);o=!1,s.newUsers.pole.data.days[a.po_id]=r.days,s.newUsers.pole.data.months[a.po_id]=r.months,s.newUsers.pole.data.years[a.po_id]=r.years})),this.average(this.newUsers.pole,"pole"),this.drawNewUsers(t)},treatmentJobs:function(e,t){this.groupBy=t.groupBy;var s=this;this.jobs.data={days:{},months:{},years:{}};var o=!0;switch(t.groupBy){case"type":this.userTypes.forEach((function(a){var n=e.process.filter((function(e){return e.type===a.t_id})),r=s.extractSeriesFrom(n,a.t_id,s.jobs,o,t);o=!1,s.jobs.data.days[a.t_id]=r.days,s.jobs.data.months[a.t_id]=r.months,s.jobs.data.years[a.t_id]=r.years}));break;case"pole":this.poles.forEach((function(a){var n=e.process.filter((function(e){return e.pole===a.po_id})),r=s.extractSeriesFrom(n,a.po_id,s.jobs,o,t);o=!1,s.jobs.data.days[a.po_id]=r.days,s.jobs.data.months[a.po_id]=r.months,s.jobs.data.years[a.po_id]=r.years}));break;case"service":this.selectedServices.forEach((function(a){if(""===s.selectedService()||s.selectedService()===a.id){var n=e.process.filter((function(e){return e.service===parseInt(a.id)})),r=s.extractSeriesFrom(n,a.name,s.jobs,o,t);o=!1,s.jobs.data.days[a.name]=r.days,s.jobs.data.months[a.name]=r.months,s.jobs.data.years[a.name]=r.years}}))}this.average(this.jobs,t.groupBy,t),this.drawJobs(t)},treatmentCiest2:function(e,t){var s=this;this.ciest2.data={days:{},months:{},years:{}};var o=!0;this.selectedServices.forEach((function(a){if(""===s.selectedService()||s.selectedService()===a.id){var n=e.process.filter((function(e){return e.service===parseInt(a.id)})),r=s.extractSeriesFrom(n,a.name,s.ciest2,o,t);o=!1,s.ciest2.data.days[a.name]=r.days,s.ciest2.data.months[a.name]=r.months,s.ciest2.data.years[a.name]=r.years}})),this.download.data=this.extractSeriesFrom(e.download,null,this.download,!1,t),this.average(this.ciest2,"service",t),this.drawCiest2(t),this.drawDownload(t)},treatmentProducts:function(e,t){this.products.data={days:{},months:{},years:{}};var s=!0,o=this;this.selectedServices.forEach((function(a){if(""===o.selectedService()||o.selectedService()===a.id){var n=e.products.filter((function(e){return e.service===parseInt(a.id)})),r=o.extractSeriesFrom(n,a.name,o.products,s,t);s=!1,o.products.data.days[a.name]=r.days,o.products.data.months[a.name]=r.months,o.products.data.years[a.name]=r.years}})),this.productsAverage(t),this.drawProducts(t)},treatmentServices:function(e){var t=this,s=0,o=0;e.userByType.forEach((function(e){e.type?s+=e.tot:o+=e.tot})),this.totalUsers=s,this.disabledUsers=o;var a=0,n=[];this.userTypes.forEach((function(o,r,i){var c=e.userByType.find((function(e){return e.type===o.t_id}));a=c?Math.round(100*c.tot/s):0,n.push({name:t.userTypeName(o.t_id),y:a})}));var r={name:"truc",data:n};this.drawPie("userByType","Utilisateurs par type d'organisme",[r],{}),s=0,e.userByPole.forEach((function(e){e.pole&&(s+=e.tot)})),a=0,n=[],u=[],this.poles.forEach((function(o,r,i){var c=e.userByPole.find((function(e){return e.pole===o.po_id}));a=c?Math.round(100*c.tot/s):0,u.push(o.po_color),n.push({name:t.poleName(o.po_id),y:a})})),r={name:"truc",data:n},this.drawPie("userByPole","Utilisateurs par pôle",[r],{colors:u});var i=null,c=[],l={},u=[];this.poles.forEach((function(e){l[e.po_id]=[],u.push(e.po_color)})),e.servicePoles.forEach((function(t){if(t.service!==i)for(var s in c.push(t.service),i=t.service,l){var o=e.servicePoles.find((function(e){return e.pole===s&&e.service===i}));o?l[s].push(o.tot):l[s].push(0)}}));var d=[];for(var p in l)d.push({name:this.poleName(p),data:l[p]});for(var v in this.drawHistogram("servicePoles","Nombre d'utilisateurs par service et par pôle",c,d,{colors:u}),i=null,c=[],l={},this.userTypes.forEach((function(e){l[e.t_id]=[]})),e.serviceUsers.forEach((function(t){if(t.service!==i)for(var s in c.push(t.service),i=t.service,l){var o=e.serviceUsers.find((function(e){return e.type===s&&e.service===i}));o?l[s].push(o.tot):l[s].push(0)}})),d=[],l)d.push({name:this.userTypeName(v),data:l[v]});this.drawHistogram("serviceUsers","Nombre d'utilisateurs par service et type",c,d)}}};s(161);const m=(0,v.Z)(f,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticStyle:{padding:"10px"}},[t("ul",{staticClass:"menu-content"},[t("li",{class:{selected:"service"===e.mode},on:{click:function(t){return e.setMode("service")}}},[t("span",[e._v("Services")])]),t("li",{class:{selected:"connection"===e.mode},on:{click:function(t){return e.setMode("connection")}}},[t("span",[e._v("Connexion")])]),t("li",{class:{selected:"job"===e.mode},on:{click:function(t){return e.setMode("job")}}},[t("span",[e._v("Jobs")])]),t("li",{class:{selected:"product"===e.mode},on:{click:function(t){return e.setMode("product")}}},[t("span",[e._v("Produits")])]),t("li",{class:{selected:"ciest2"===e.mode},on:{click:function(t){return e.setMode("ciest2")}}},[t("span",[e._v("CIEST2")])])])]),e._v(" "),t("gdm-stat-form",{ref:"form",attrs:{mode:e.mode,services:e.services,groups:e.groups},on:{servicesChange:e.initServices,search:e.search,draw:e.draw}}),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"connection"===e.mode,expression:"mode === 'connection'"}]},[t("h1",[e._v("Suivi des authentifications")]),e._v(" "),"type"===e.group?t("div",{staticClass:"job-header"},[t("div",[t("h2",[e._v("Total connexions aux services de calcul par type d'organisme")]),e._v(" "),e._l(e.userTypes,(function(s,o){return t("div",[t("span",{staticClass:"fa fa-circle",style:{color:e.colors[o]}}),e._v(" "),t("b",[e._v(e._s(s.t_name_fr))]),e._v(":\n\t             "),e.sessions.type.count&&e.sessions.type.count[s.t_id]?t("span",[e._v(e._s(e.sessions.type.count[s.t_id].toLocaleString()))]):t("span",[e._v("0")])])})),e._v(" "),t("hr",{staticStyle:{width:"60%","margin-left":"5px",color:"gray"}}),e._v(" "),t("div",[t("b",[e._v("Total")]),e._v(": "+e._s(e.sessions.type.avg.count)+"\n           ")])],2),e._v(" "),t("div",[t("h2",[e._v("Visiteurs par jour")]),e._v(" "),e._l(e.userTypes,(function(s,o){return t("div",[t("span",{staticClass:"fa fa-circle",style:{color:e.colors[o]}}),e._v(" "),t("b",[e._v(e._s(s.t_name_fr))]),e._v(":\n               "),e.sessions.type.count&&e.sessions.type.count[s.t_id]?t("span",[e._v(e._s((e.sessions.type.count[s.t_id]/e.days.length).toLocaleString()))]):t("span",[e._v("0")])])})),e._v(" "),t("hr",{staticStyle:{width:"60%","margin-left":"5px",color:"gray"}}),e._v(" "),t("div",[t("b",[e._v("Total")]),e._v(": "+e._s((e.sessions.type.avg.count/e.days.length).toLocaleString())+"\n           ")])],2)]):t("div",{staticClass:"job-header"},[t("div",[t("h2",[e._v("Total connexions aux services de calcul par pôle")]),e._v(" "),e._l(e.poles,(function(s,o){return t("div",[t("span",{staticClass:"fa fa-circle",style:{color:s.po_color}}),e._v(" "),t("b",[e._v(e._s(e.poleName(s.po_id)))]),e._v(":\n               "),e.sessions.pole.count&&e.sessions.pole.count[s.po_id]?t("span",[e._v(e._s(e.sessions.pole.count[s.po_id].toLocaleString()))]):t("span",[e._v("0")])])})),e._v(" "),t("hr",{staticStyle:{width:"60%","margin-left":"5px",color:"gray"}}),e._v(" "),t("div",[t("b",[e._v("Total")]),e._v(": "+e._s(e.sessions.pole.avg.count)+"\n           ")])],2),e._v(" "),t("div",[t("h2",[e._v("Visiteurs par jour")]),e._v(" "),e._l(e.poles,(function(s,o){return t("div",[t("span",{staticClass:"fa fa-circle",style:{color:s.po_color}}),e._v(" "),t("b",[e._v(e._s(e.poleName(s.po_id)))]),e._v(":\n               "),e.sessions.pole.count&&e.sessions.pole.count[s.po_id]?t("span",[e._v(e._s((e.sessions.pole.count[s.po_id]/e.days.length).toLocaleString()))]):t("span",[e._v("0")])])})),e._v(" "),t("hr",{staticStyle:{width:"60%","margin-left":"5px",color:"gray"}}),e._v(" "),t("div",[t("b",[e._v("Total")]),e._v(": "+e._s((e.sessions.pole.avg.count/e.days.length).toLocaleString())+"\n           ")])],2)]),e._v(" "),t("div",{staticStyle:{"margin-top":"30px"},attrs:{id:"sessions"}}),e._v(" "),t("h1",[e._v("Suivi des créations de comptes")]),e._v(" "),"type"===e.group?t("div",{staticClass:"job-header"},[t("div",[t("h2",[e._v("Total nouvels utilisateurs")]),e._v(" "),e._l(e.userTypes,(function(s,o){return e.userTypes?t("div",[t("span",{staticClass:"fa fa-circle",style:{color:e.colors[o]}}),e._v(" "),t("b",[e._v(e._s(s.t_name_fr))]),e._v(":\n               "),e.newUsers.type.count&&e.newUsers.type.count[s.t_id]?t("span",[e._v(e._s(e.newUsers.type.count[s.t_id].toLocaleString()))]):t("span",[e._v("0")])]):e._e()})),e._v(" "),t("hr",{staticStyle:{width:"60%","margin-left":"5px",color:"gray"}}),e._v(" "),t("div",[t("b",[e._v("Total")]),e._v(": "+e._s(e.newUsers.type.avg.count)+"\n           ")])],2),e._v(" "),t("div",[t("h2",[e._v("Nouveaux comptes par jour")]),e._v(" "),e._l(e.userTypes,(function(s,o){return t("div",[t("span",{staticClass:"fa fa-circle",style:{color:e.colors[o]}}),e._v(" "),t("b",[e._v(e._s(s.t_name_fr))]),e._v(":\n               "),e.newUsers.type.count&&e.newUsers.type.count[s.t_id]?t("span",[e._v(e._s((e.newUsers.type.count[s.t_id]/e.days.length).toLocaleString()))]):t("span",[e._v("0")])])})),e._v(" "),t("hr",{staticStyle:{width:"60%","margin-left":"5px",color:"gray"}}),e._v(" "),t("div",[t("b",[e._v("Total")]),e._v(": "+e._s((e.newUsers.type.avg.count/e.days.length).toLocaleString())+"\n           ")])],2)]):t("div",{staticClass:"job-header"},[t("div",[t("h2",[e._v("Total nouvels utilisateurs")]),e._v(" "),e._l(e.poles,(function(s,o){return t("div",[t("span",{staticClass:"fa fa-circle",style:{color:s.po_color}}),e._v(" "),t("b",[e._v(e._s(e.poleName(s.po_id)))]),e._v(":\n               "),e.newUsers.pole.count&&e.newUsers.pole.count[s.po_id]?t("span",[e._v(e._s(e.newUsers.pole.count[s.po_id].toLocaleString()))]):t("span",[e._v("0")])])})),e._v(" "),t("hr",{staticStyle:{width:"60%","margin-left":"5px",color:"gray"}}),e._v(" "),t("div",[t("b",[e._v("Total")]),e._v(": "+e._s(e.newUsers.pole.avg.count)+"\n           ")])],2),e._v(" "),t("div",[t("h2",[e._v("Nouveaux comptes par jour")]),e._v(" "),e._l(e.poles,(function(s,o){return t("div",[t("span",{staticClass:"fa fa-circle",style:{color:s.po_color}}),e._v(" "),t("b",[e._v(e._s(e.poleName(s.po_id)))]),e._v(":\n               "),e.newUsers.pole.count&&e.newUsers.pole.count[s.po_id]?t("span",[e._v(e._s((e.newUsers.pole.count[s.po_id]/e.days.length).toLocaleString()))]):t("span",[e._v("0")])])})),e._v(" "),t("hr",{staticStyle:{width:"60%","margin-left":"5px",color:"gray"}}),e._v(" "),t("div",[t("b",[e._v("Total")]),e._v(": "+e._s((e.newUsers.pole.avg.count/e.days.length).toLocaleString())+"\n           ")])],2)]),e._v(" "),t("div",{staticStyle:{"margin-top":"30px"},attrs:{id:"newUsers"}})]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"service"===e.mode,expression:"mode === 'service'"}]},[t("h2",[e._v("Répartition des utilisateurs")]),e._v(" "),t("div",[t("b",[e._v("Nombre d'utilisateurs actifs")]),e._v(": "+e._s(e.totalUsers))]),e._v(" "),e._m(0),e._v(" "),e._m(1),e._v(" "),t("div",{staticStyle:{"margin-top":"30px"},attrs:{id:"serviceUsers"}}),e._v(" "),t("div",{staticStyle:{"margin-top":"30px"},attrs:{id:"servicePoles"}})]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"job"===e.mode,expression:"mode === 'job'"}],staticClass:"job-content"},[t("h1",[e._v(e._s(e.selectedName()))]),e._v(" "),t("div",{staticClass:"job-header"},[t("div",[t("h2",[e._v("Total jobs")]),e._v(" "),e._l(e.userTypes,(function(s,o){return"type"===e.groupBy?t("div",[t("span",{staticClass:"fa fa-circle",style:{color:e.colors[o]}}),e._v(" "),t("b",[e._v(e._s(s.t_name_fr))]),e._v(":\n             "),e.jobs.count&&e.jobs.count[s.t_id]?t("span",[e._v(e._s(e.jobs.count[s.t_id].toLocaleString()))]):t("span",[e._v("0")])]):e._e()})),e._v(" "),e._l(e.poles,(function(s,o){return"pole"===e.groupBy?t("div",[t("span",{staticClass:"fa fa-circle",style:{color:s.po_color}}),e._v(" "),t("b",[e._v(e._s(e.poleName(s.po_id)))]),e._v(":\n             "),e.jobs.count&&e.jobs.count[s.po_id]?t("span",[e._v(e._s(e.jobs.count[s.po_id].toLocaleString()))]):t("span",[e._v("0")])]):e._e()})),e._v(" "),e._l(e.selectedServices,(function(s){return"service"!==e.groupBy||""!==e.selectedService()&&e.selectedService()!==s.id?e._e():t("div",[t("span",{staticClass:"fa fa-circle",style:{color:s.color}}),e._v(" "),t("b",[e._v(e._s(s.name))]),e._v(":\n             "),e.jobs.count&&e.jobs.count[s.name]?t("span",[e._v(e._s(e.jobs.count[s.name].toLocaleString()))]):t("span",[e._v("0")])])})),e._v(" "),""===e.selectedService()||"service"!==e.groupBy?t("hr",{staticStyle:{width:"60%","margin-left":"5px",color:"gray"}}):e._e(),e._v(" "),""===e.selectedService()||"service"!==e.groupBy?t("div",[t("b",[e._v("Total")]),e._v(": "+e._s(e.jobs.avg.count)+"\n           ")]):e._e()],2),e._v(" "),t("div",[t("h2",[e._v("Coût moyen")]),e._v(" "),e._l(e.userTypes,(function(s,o){return"type"===e.groupBy?t("div",[t("span",{staticClass:"fa fa-circle",style:{color:e.colors[o]}}),e._v(" "),t("b",[e._v(e._s(s.t_name_fr))]),e._v(":\n             "),e.jobs.cost&&e.jobs.cost[s.t_id]?t("span",[e._v(e._s(Math.round(e.jobs.cost[s.t_id]/e.jobs.countCost[s.t_id]).toLocaleString())+" CPU secondes")]):t("span",[e._v("---")])]):e._e()})),e._v(" "),e._l(e.poles,(function(s,o){return"pole"===e.groupBy?t("div",[t("span",{staticClass:"fa fa-circle",style:{color:s.po_color}}),e._v(" "),t("b",[e._v(e._s(e.poleName(s.po_id)))]),e._v(":\n             "),e.jobs.cost&&e.jobs.cost[s.po_id]?t("span",[e._v(e._s(Math.round(e.jobs.cost[s.po_id]/e.jobs.countCost[s.po_id]).toLocaleString())+" CPU secondes")]):t("span",[e._v("---")])]):e._e()})),e._v(" "),e._l(e.selectedServices,(function(s){return"service"!==e.groupBy||""!==e.selectedService()&&e.selectedService()!==s.id?e._e():t("div",[t("span",{staticClass:"fa fa-circle",style:{color:s.color}}),e._v(" "),t("b",[e._v(e._s(s.name))]),e._v(":\n             "),e.jobs.cost&&e.jobs.cost[s.name]?t("span",[e._v(e._s(Math.round(e.jobs.cost[s.name]/e.jobs.countCost[s.name]).toLocaleString())+" CPU secondes")]):t("span",[e._v("---")])])})),e._v(" "),""===e.selectedService()||"service"!==e.groupBy?t("hr",{staticStyle:{width:"60%","margin-left":"5px",color:"gray"}}):e._e(),e._v(" "),""===e.selectedService()||"service"!==e.groupBy?t("div",[t("b",[e._v("Tout "+e._s(e.groupBy))]),e._v(":\n              "),e.jobs.avg&&e.jobs.avg.cost?t("span",[e._v(e._s(Math.round(e.jobs.avg.cost).toLocaleString())+" CPU Secondes")]):t("span",[e._v("---")])]):e._e()],2),e._v(" "),t("div",[t("h2",[e._v("Durée moyenne")]),e._v(" "),e._l(e.userTypes,(function(s,o){return"type"===e.groupBy?t("div",[t("span",{staticClass:"fa fa-circle",style:{color:e.colors[o]}}),e._v(" "),t("b",[e._v(e._s(s.t_name_fr))]),e._v(":\n             "),"success"===e.status&&e.jobs.duration&&e.jobs.countDuration[s.t_id]?t("span",[e._v(e._s(e.secondToStr(e.jobs.duration[s.t_id]/e.jobs.countDuration[s.t_id])))]):t("span",[e._v("---")])]):e._e()})),e._v(" "),e._l(e.poles,(function(s,o){return"pole"===e.groupBy?t("div",[t("span",{staticClass:"fa fa-circle",style:{color:s.po_color}}),e._v(" "),t("b",[e._v(e._s(e.poleName(s.po_id)))]),e._v(":\n             "),"success"===e.status&&e.jobs.duration&&e.jobs.countDuration[s.po_id]?t("span",[e._v(e._s(e.secondToStr(e.jobs.duration[s.po_id]/e.jobs.countDuration[s.po_id])))]):t("span",[e._v("---")])]):e._e()})),e._v(" "),e._l(e.selectedServices,(function(s){return"service"!==e.groupBy||""!==e.selectedService()&&e.selectedService()!==s.id?e._e():t("div",[t("span",{staticClass:"fa fa-circle",style:{color:s.color}}),e._v(" "),t("b",[e._v(e._s(s.name))]),e._v(":\n             "),"success"===e.status&&e.jobs.duration&&e.jobs.countDuration[s.name]?t("span",[e._v(e._s(e.secondToStr(e.jobs.duration[s.name]/e.jobs.countDuration[s.name])))]):t("span",[e._v("---")])])})),e._v(" "),""===e.selectedService()||"service"!==e.groupBy?t("hr",{staticStyle:{width:"60%","margin-left":"5px",color:"gray"}}):e._e(),e._v(" "),""===e.selectedService()||"service"!==e.groupBy?t("div",[t("b",[e._v("Tout "+e._s(e.groupBy))]),e._v(":\n              "),"success"===e.status&&e.jobs.avg.duration?t("span",[e._v(e._s(e.secondToStr(e.jobs.avg.duration)))]):t("span",[e._v("---")])]):e._e()],2)]),e._v(" "),t("div",{staticStyle:{"margin-top":"30px"},attrs:{id:"jobs"}})]),e._v(" "),"product"===e.mode?t("div",[t("h1",[e._v(e._s(e.selectedName()))]),e._v(" "),t("div",{staticClass:"job-header"},[t("div",[t("h2",[e._v("Nombre de jobs")]),e._v(" "),e._l(e.selectedServices,(function(s){return t("div",[t("span",{staticClass:"fa fa-circle",style:{color:s.color}}),e._v(" "),t("b",[e._v(e._s(s.name))]),e._v(":\n             "),e.products.countJobs&&e.products.countJobs[s.name]?t("span",[e._v(e._s(e.products.countJobs[s.name].toLocaleString()))]):t("span",[e._v("0")])])})),e._v(" "),""===e.selectedService()?t("hr",{staticStyle:{width:"60%","margin-left":"5px",color:"gray"}}):e._e(),e._v(" "),""===e.selectedService()?t("div",[t("b",[e._v("Total")]),e._v(": "+e._s(e.products.avg.countJobs)+"\n           ")]):e._e()],2),e._v(" "),t("div",[t("h2",[e._v("Total produits générés")]),e._v(" "),e._l(e.selectedServices,(function(s){return t("div",[t("span",{staticClass:"fa fa-circle",style:{color:s.color}}),e._v(" "),t("b",[e._v(e._s(s.name))]),e._v(":\n             "),e.products.countJobs&&e.products.countJobs[s.name]?t("span",[e._v(e._s(e.products.count[s.name].toLocaleString()))]):t("span",[e._v("0")])])})),e._v(" "),""===e.selectedService()?t("hr",{staticStyle:{width:"60%","margin-left":"5px",color:"gray"}}):e._e(),e._v(" "),""===e.selectedService()?t("div",[t("b",[e._v("Total")]),e._v(": "+e._s(e.products.avg.countProducts)+"\n           ")]):e._e()],2),e._v(" "),t("div",[t("h2",[e._v("Nombre moyen de produits générés")]),e._v(" "),e._l(e.selectedServices,(function(s){return t("div",[t("span",{staticClass:"fa fa-circle",style:{color:s.color}}),e._v(" "),t("b",[e._v(e._s(s.name))]),e._v(":\n             "),e.products.countJobs&&e.products.countJobs[s.name]?t("span",[e._v(e._s((e.products.count[s.name]/e.products.countJobs[s.name]).toLocaleString()))]):t("span",[e._v("0")])])})),e._v(" "),""===e.selectedService()?t("hr",{staticStyle:{width:"60%","margin-left":"5px",color:"gray"}}):e._e(),e._v(" "),""===e.selectedService()?t("div",[t("b",[e._v("Total")]),e._v(": \n              "),e.products.avg.countJobs?t("span",[e._v(e._s(Math.round(e.products.avg.countProducts/e.products.avg.countJobs).toLocaleString()))]):t("span",[e._v("---")])]):e._e()],2)]),e._v(" "),t("div",{staticStyle:{"margin-top":"30px"},attrs:{id:"products"}})]):e._e(),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"ciest2"===e.mode,expression:"mode === 'ciest2'"}],staticClass:"job-content"},[t("h1",[e._v(e._s(e.selectedName()))]),e._v(" "),t("div",{staticClass:"job-header"},[t("div",[t("h2",[e._v("Total jobs")]),e._v(" "),e._l(e.selectedServices,(function(s){return""===e.selectedService()||e.selectedService()===s.id?t("div",[t("span",{staticClass:"fa fa-circle",style:{color:s.color}}),e._v(" "),t("b",[e._v(e._s(s.name))]),e._v(":\n             "),e.ciest2.count&&e.ciest2.count[s.name]?t("span",[e._v(e._s(e.ciest2.count[s.name].toLocaleString()))]):t("span",[e._v("0")])]):e._e()})),e._v(" "),""===e.selectedService()?t("hr",{staticStyle:{width:"60%","margin-left":"5px",color:"gray"}}):e._e(),e._v(" "),""===e.selectedService()?t("div",[t("b",[e._v("Total")]),e._v(": "+e._s(e.ciest2.avg.count)+"\n           ")]):e._e()],2),e._v(" "),t("div",[t("h2",[e._v("Coût moyen")]),e._v(" "),e._l(e.selectedServices,(function(s){return""===e.selectedService()||e.selectedService()===s.id?t("div",[t("span",{staticClass:"fa fa-circle",style:{color:s.color}}),e._v(" "),t("b",[e._v(e._s(s.name))]),e._v(":\n             "),e.ciest2.cost&&e.ciest2.cost[s.name]?t("span",[e._v(e._s(Math.round(e.ciest2.cost[s.name]/e.ciest2.countCost[s.name]).toLocaleString())+" CPU secondes")]):t("span",[e._v("---")])]):e._e()})),e._v(" "),""===e.selectedService()?t("hr",{staticStyle:{width:"60%","margin-left":"5px",color:"gray"}}):e._e(),e._v(" "),""===e.selectedService()?t("div",[t("b",[e._v("Tout service")]),e._v(":\n              "),e.ciest2.avg&&e.ciest2.avg.cost?t("span",[e._v(e._s(Math.round(e.ciest2.avg.cost).toLocaleString())+" CPU Secondes")]):t("span",[e._v("---")])]):e._e()],2),e._v(" "),t("div",[t("h2",[e._v("Durée moyenne")]),e._v(" "),e._l(e.selectedServices,(function(s){return""===e.selectedService()||e.selectedService()===s.id?t("div",[t("span",{staticClass:"fa fa-circle",style:{color:s.color}}),e._v(" "),t("b",[e._v(e._s(s.name))]),e._v(":\n             "),"success"===e.status&&e.ciest2.duration&&e.ciest2.countDuration[s.name]?t("span",[e._v(e._s(e.secondToStr(e.ciest2.duration[s.name]/e.ciest2.countDuration[s.name])))]):t("span",[e._v("---")])]):e._e()})),e._v(" "),""===e.selectedService()?t("hr",{staticStyle:{width:"60%","margin-left":"5px",color:"gray"}}):e._e(),e._v(" "),""===e.selectedService()?t("div",[t("b",[e._v("Tout service")]),e._v(":\n              "),"success"===e.status&&e.ciest2.avg.duration?t("span",[e._v(e._s(e.secondToStr(e.ciest2.avg.duration)))]):t("span",[e._v("---")])]):e._e()],2)]),e._v(" "),t("div",{staticStyle:{"margin-top":"30px"},attrs:{id:"ciest2"}}),e._v(" "),t("div",{staticStyle:{"margin-top":"30px"}},[t("h1",[e._v("Images téléchargées")]),e._v(" "),t("div",{staticClass:"job-header"},[t("h2",[e._v("Total: "+e._s(e.download.count))])]),e._v(" "),t("div",{attrs:{id:"download"}})])])],1)}),[function(){var e=this._self._c;return e("div",{staticStyle:{width:"48%",display:"inline-block","margin-top":"30px"}},[e("div",{attrs:{id:"userByType"}})])},function(){var e=this._self._c;return e("div",{staticStyle:{width:"48%",display:"inline-block"}},[e("div",{attrs:{id:"userByPole"}})])}],!1,null,null,null).exports},161:(e,t,s)=>{var o=s(1839);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals),(0,s(5346).Z)("15fd2ade",o,!0,{})}}]);
//# sourceMappingURL=975.gdm-search-components-vjs.js.map