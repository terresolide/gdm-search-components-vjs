{"version":3,"sources":["webpack:///./src/gdm-manage-step.vue?f88a","webpack:///./src/gdm-manage-step.vue?471c","webpack:///./src/gdm-manage-step.vue?0235","webpack:///./src/gdm-manage-step.vue?423f","webpack:///./src/gdm-manage-step.vue?13c0","webpack:///src/gdm-manage-step.vue","webpack:///./src/gdm-manage-step.vue"],"names":["content","__esModule","default","module","i","locals","exports","add","___CSS_LOADER_API_IMPORT___","push","name","components","props","api","type","String","serviceId","Number","computed","created","this","getSteps","mounted","destroyed","data","steps","mode","newStep","stp_name","stp_title","stp_description","methods","$el","querySelectorAll","length","$http","post","get","display","response","body","displayForm","edit","console","log","index","$set","error","moveDown","step1","step2","reverse","moveUp","remove","reset","save","step","component","_vm","_h","$createElement","_c","_self","staticClass","_l","attrs","_v","directives","rawName","value","expression","domProps","on","$event","target","composing","_s","_e","staticStyle","class"],"mappings":"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","file":"7.gdm-search-components-vjs.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./gdm-manage-step.vue?vue&type=style&index=0&lang=css&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"aecb1af2\", content, true, {});","export * from \"-!../node_modules/vue-style-loader/index.js!../node_modules/css-loader/dist/cjs.js!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./gdm-manage-step.vue?vue&type=style&index=0&lang=css&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n.gdm-step {\\n  width: 400px;\\n  border: 1px dotted grey;\\n  padding: 5px 10px;\\n  min-height: 25px;\\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.85);\\n  margin: 5px 0;\\n}\\n.gdm-step label {\\n  display: inline-block;\\n  min-width: 120px;\\n  width: 120px;\\n  text-align:right;\\n  font-weight: 800;\\n  vertical-align:top;\\n}\\n.gdm-step input[type=\\\"text\\\"],\\n.gdm-step textarea {\\n min-width: 250px;\\n}\\n.gdm-step textarea {\\n  padding:6px;\\n}\\n.gdm-step .gdm-button-serie {\\n   margin: 10px 0 10px 125px;\\n}\\n.gdm-manage-step input[type=\\\"submit\\\"].gdm-button {\\n  font-family:inherit;\\n  opacity:1;\\n  font-size: inherit;\\n}\\n.gdm-manage-step span.gdm-button,\\n.gdm-manage-step input.gdm-button {\\n  \\n  cursor: pointer;\\n  border: 1px solid grey;\\n  border-radius: 3px;\\n  padding: 3px;\\n  background: #eee;\\n  opacity:0.8;\\n  min-width: 16px;\\n  text-align: center;\\n   box-shadow: 0 1px 2px rgba(0, 0, 0, 0.65);\\n}\\n.gdm-step span.gdm-button.gdm-disable {\\n  pointer-events: none;\\n  opacity: 0.5;\\n}\\n.gdm-step span.gdm-button:hover {\\n  opacity: 1;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"gdm-manage-step\"},[_vm._l((_vm.steps),function(step,index){return _c('div',{staticClass:\"gdm-step\"},[(!_vm.steps[index].edit)?_c('span',[_vm._v(_vm._s(step.stp_name))]):_c('div',[_c('form',{attrs:{\"id\":'form_' + index}},[_c('label',[_vm._v(\"Identifiant\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(step.stp_name),expression:\"step.stp_name\"}],attrs:{\"type\":\"text\",\"pattern\":\"[a-zA-Z0-9_-]{3,30}\",\"title\":\"Chaîne alphanumérique  entre 3 et 20 caractères\"},domProps:{\"value\":(step.stp_name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(step, \"stp_name\", $event.target.value)}}}),_vm._v(\" \"),_c('label',[_vm._v(\"Titre\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(step.stp_title),expression:\"step.stp_title\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(step.stp_title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(step, \"stp_title\", $event.target.value)}}}),_vm._v(\" \"),_c('label',[_vm._v(\"Description\")]),_vm._v(\" \"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(step.stp_description),expression:\"step.stp_description\"}],domProps:{\"value\":(step.stp_description)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(step, \"stp_description\", $event.target.value)}}}),_vm._v(\" \"),_c('div',{staticClass:\"gdm-button-serie\"},[_c('span',{staticClass:\"gdm-button\",on:{\"click\":function($event){return _vm.reset(index)}}},[_vm._v(\"Annuler\")]),_vm._v(\" \"),_c('span',{staticClass:\"gdm-button\",on:{\"click\":function($event){return _vm.save(index)}}},[_vm._v(\"Enregistrer\")])])])]),_vm._v(\" \"),(!_vm.steps[index].edit)?_c('div',{staticStyle:{\"float\":\"right\"}},[_c('span',{staticClass:\"fa fa-pencil gdm-button\",on:{\"click\":function($event){return _vm.edit(index)}}}),_vm._v(\" \"),_c('span',{staticClass:\"fa fa-arrow-up gdm-button\",class:{'gdm-disable': index === 0 },on:{\"click\":function($event){return _vm.moveUp(index)}}}),_vm._v(\" \"),_c('span',{staticClass:\"fa fa-arrow-down gdm-button\",class:{'gdm-disable': index === _vm.steps.length - 1 },on:{\"click\":function($event){return _vm.moveDown(index)}}}),_vm._v(\" \"),_c('span',{staticClass:\"fa fa-close gdm-button\",on:{\"click\":function($event){return _vm.remove(index)}}})]):_vm._e()])}),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"20px\"}},[(_vm.mode !== 'add')?_c('div',[_c('span',{staticClass:\"gdm-button\",on:{\"click\":_vm.displayForm}},[_vm._v(\"Ajouter\")])]):_c('div',{staticClass:\"gdm-step\"},[_c('form',{attrs:{\"id\":\"form_new\"}},[_c('label',[_vm._v(\"Identifiant\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newStep.stp_name),expression:\"newStep.stp_name\"}],attrs:{\"type\":\"text\",\"name\":\"\",\"pattern\":\"[a-zA-Z0-9_-]{3,30}\",\"title\":\"Chaîne alphanumérique  entre 3 et 20 caractères\"},domProps:{\"value\":(_vm.newStep.stp_name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.newStep, \"stp_name\", $event.target.value)}}}),_vm._v(\" \"),_c('label',[_vm._v(\"Titre\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newStep.stp_title),expression:\"newStep.stp_title\"}],attrs:{\"type\":\"text\",\"name\":\"\"},domProps:{\"value\":(_vm.newStep.stp_title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.newStep, \"stp_title\", $event.target.value)}}}),_vm._v(\" \"),_c('label',[_vm._v(\"Description\")]),_vm._v(\" \"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newStep.stp_description),expression:\"newStep.stp_description\"}],domProps:{\"value\":(_vm.newStep.stp_description)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.newStep, \"stp_description\", $event.target.value)}}}),_vm._v(\" \"),_c('div',{staticClass:\"gdm-button-serie\"},[_c('span',{staticClass:\"gdm-button\",on:{\"click\":function($event){return _vm.reset(null)}}},[_vm._v(\"Annuler\")]),_vm._v(\" \"),_c('span',{staticClass:\"gdm-button\",on:{\"click\":function($event){return _vm.add()}}},[_vm._v(\"Enregistrer\")])])])])])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./gdm-manage-step.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./gdm-manage-step.vue?vue&type=script&lang=js&\"","<template>\n <span class=\"gdm-manage-step\">\n <div v-for=\"(step, index) in steps\" class=\"gdm-step\">\n   <span v-if=\"!steps[index].edit\">{{step.stp_name}}</span>\n   <div v-else>\n     <form :id=\"'form_' + index\">\n      <label>Identifiant</label>\n      <input type=\"text\"  v-model=\"step.stp_name\" pattern=\"[a-zA-Z0-9_-]{3,30}\" title=\"Chaîne alphanumérique  entre 3 et 20 caractères\">\n      <label>Titre</label>\n      <input type=\"text\"  v-model=\"step.stp_title\"  >\n      <label>Description</label>\n      <textarea v-model=\"step.stp_description\"></textarea>\n      <div class=\"gdm-button-serie\" >\n      <span class=\"gdm-button\" @click=\"reset(index)\">Annuler</span>\n      <span  class=\"gdm-button\" @click=\"save(index)\">Enregistrer</span>\n      </div>\n    </form>\n   </div>\n   <div style=\"float:right;\" v-if=\"!steps[index].edit\">\n\t   <span class=\"fa fa-pencil gdm-button\" @click=\"edit(index)\"></span>\n\t   <span class=\"fa fa-arrow-up gdm-button\" :class=\"{'gdm-disable': index === 0 }\" @click=\"moveUp(index)\" ></span>\n\t   <span class=\"fa fa-arrow-down gdm-button\" :class=\"{'gdm-disable': index === steps.length - 1 }\" @click=\"moveDown(index)\"></span>\n\t   <span class=\"fa fa-close gdm-button\" @click=\"remove(index)\"></span> \n   </div>\n </div>\n <div style=\"margin-top:20px;\">\n\t <div v-if=\"mode !== 'add'\">\n\t    <span class=\"gdm-button\"  @click=\"displayForm\" >Ajouter</span>\n\t </div>\n\t <div v-else class=\"gdm-step\">\n\t   <form id=\"form_new\">\n\t     <label>Identifiant</label>\n\t     <input type=\"text\" name=\"\" v-model=\"newStep.stp_name\" pattern=\"[a-zA-Z0-9_-]{3,30}\" title=\"Chaîne alphanumérique  entre 3 et 20 caractères\">\n\t       <label>Titre</label>\n       <input type=\"text\" name=\"\" v-model=\"newStep.stp_title\"  >\n      <label>Description</label>\n\t      <textarea v-model=\"newStep.stp_description\"></textarea>\n\t      <div class=\"gdm-button-serie\">\n\t\t      <span class=\"gdm-button\" @click=\"reset(null)\">Annuler</span>\n\t\t      <span class=\"gdm-button\" @click=\"add()\">Enregistrer</span>\n        </div>\n     </form>\n   </div>\n </div>\n </span>\n</template>\n<script>\n\nexport default {\n  name: 'GdmManageStep',\n  components: {\n  },\n  props: {\n\n    api: {\n      type: String,\n      default: null\n    },\n    serviceId: {\n      type: Number,\n      default: null\n    }\n  },\n  computed: {\n   \n  },\n  created () {\n    this.getSteps()\n  },\n  mounted () {\n  },\n  destroyed () {\n  },\n\n  data() {\n    return {\n      steps: [],\n      mode: null,\n      newStep: {\n        stp_name: null,\n        stp_title: null,\n        stp_description: null\n      }\n    }\n  },\n  methods: {\n    add () {\n      var nodes = this.$el.querySelectorAll('#form_new input:invalid')\n      if (nodes.length > 0) {\n        return\n      }\n      if (this.api && this.serviceId) {\n        this.$http.post(\n            this.api + '/add/' + this.serviceId, \n            this.newStep, \n            { emulateJSON: true,\n              credentials: true})\n        .then(\n            response => this.display(response),\n            response => this.error(response)\n        )\n      }\n    },\n    getSteps () {\n      if (this.api && this.serviceId) {\n        this.$http.get(this.api + '/get/' + this.serviceId, {credentials: true})\n        .then(\n            response => this.display(response),\n            response => this.error(response)\n        )\n      }\n    },\n    display (response) {\n      this.mode = null\n      this.newStep = {\n        stp_name: null,\n        stp_title: null,\n        stp_description: null\n      }\n      this.steps = response.body\n    },\n    displayForm () {\n      this.mode = 'add'\n    },\n    edit (index) {\n      console.log(index)\n      this.$set(this.steps[index], 'edit' ,true)\n    },\n    error (response) {\n      switch(response.status) {\n      case 403:\n        alert('Accès interdit: déconnecté?')\n        break\n      case 402:\n        alert(\"Vous n'avez pas l'autorisation d'éditer ce service\")\n        break\n      }\n      \n    },\n    moveDown (index) {\n      var step1 = this.steps[index]\n      var step2 = this.steps[index + 1]\n      this.reverse(step1, step2)\n    },\n    moveUp (index) {\n      var step1 = this.steps[index -1]\n      var step2 = this.steps[index]\n      this.reverse(step1, step2)\n    },\n    remove (index) {\n      if (this.api && this.serviceId) {\n        this.$http.post(\n            this.api + '/remove/' + this.serviceId, \n            {step_id: this.steps[index]['stp_id']}, \n            { emulateJSON: true,\n              credentials: true})\n        .then(\n            response => this.display(response),\n            response => this.error(response)\n        )\n      }\n    },\n    reverse (step1, step2) {\n      if (this.api && this.serviceId) {\n        this.$http.post(\n            this.api + '/reverse/' + this.serviceId, \n            {step1: step1, step2: step2}, \n            { emulateJSON: true,\n              credentials: true})\n        .then(\n            response => this.display(response),\n            response => this.error(response)\n        )\n      }\n    },\n\n    reset (index) {\n      if (index === null) {\n        this.mode = null\n      } else {\n        this.$set(this.steps[index], 'edit' ,false)\n      }\n    },\n    save (index) {\n      var step = this.steps[index]\n      var nodes = this.$el.querySelectorAll('#form_' + index + ' input:invalid')\n      if (nodes.length > 0) {\n        return\n      }\n      delete step.edit\n      if (this.api && this.serviceId) {\n        this.$http.post(\n            this.api + '/update/' + this.serviceId, \n            step, \n            { emulateJSON: true,\n              credentials: true})\n        .then(\n            response => this.display(response),\n            response => this.error(response)\n        )\n      }\n    }\n   \n  \n  }\n}\n</script>\n<style>\n.gdm-step {\n  width: 400px;\n  border: 1px dotted grey;\n  padding: 5px 10px;\n  min-height: 25px;\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.85);\n  margin: 5px 0;\n}\n.gdm-step label {\n  display: inline-block;\n  min-width: 120px;\n  width: 120px;\n  text-align:right;\n  font-weight: 800;\n  vertical-align:top;\n}\n.gdm-step input[type=\"text\"],\n.gdm-step textarea {\n min-width: 250px;\n\n}\n.gdm-step textarea {\n  padding:6px;\n}\n.gdm-step .gdm-button-serie {\n   margin: 10px 0 10px 125px;\n}\n.gdm-manage-step input[type=\"submit\"].gdm-button {\n  font-family:inherit;\n  opacity:1;\n  font-size: inherit;\n  }\n.gdm-manage-step span.gdm-button,\n.gdm-manage-step input.gdm-button {\n  \n  cursor: pointer;\n  border: 1px solid grey;\n  border-radius: 3px;\n  padding: 3px;\n  background: #eee;\n  opacity:0.8;\n  min-width: 16px;\n  text-align: center;\n   box-shadow: 0 1px 2px rgba(0, 0, 0, 0.65);\n}\n.gdm-step span.gdm-button.gdm-disable {\n  pointer-events: none;\n  opacity: 0.5;\n}\n.gdm-step span.gdm-button:hover {\n  opacity: 1;\n}\n</style>","import { render, staticRenderFns } from \"./gdm-manage-step.vue?vue&type=template&id=fff530ce&\"\nimport script from \"./gdm-manage-step.vue?vue&type=script&lang=js&\"\nexport * from \"./gdm-manage-step.vue?vue&type=script&lang=js&\"\nimport style0 from \"./gdm-manage-step.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}