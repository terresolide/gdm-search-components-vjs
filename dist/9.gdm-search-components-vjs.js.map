{"version":3,"sources":["webpack:///./src/gdm-restrict-to.vue?2333","webpack:///./src/gdm-restrict-to.vue?6900","webpack:///./src/gdm-restrict-to.vue?e437","webpack:///./src/gdm-restrict-to.vue","webpack:///./src/gdm-restrict-to.vue?d05c","webpack:///src/gdm-restrict-to.vue","webpack:///./src/gdm-restrict-to.vue?2dfe"],"names":["content","__esModule","default","module","i","locals","exports","add","___CSS_LOADER_API_IMPORT___","push","name","components","props","selected","type","url","created","mounted","destroyed","data","roles","current","mode","newRole","providers","userProviders","selectedProvider","description","fr","en","msg","methods","addNewRole","value","index","addRole","console","role","provider","description_fr","description_en","credentials","emulateJSON","then","cancel","getRoles","getUserProviders","initialize","initRoles","_this","component","_vm","this","_c","_self","staticClass","directives","rawName","expression","attrs","on","$event","$$selectedVal","Array","prototype","filter","call","target","options","o","map","_value","multiple","_v","_l","domProps","_s","composing","length","id","_e","staticStyle","$set"],"mappings":"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","file":"9.gdm-search-components-vjs.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./gdm-restrict-to.vue?vue&type=style&index=0&id=b8509876&prod&lang=css&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"169509b7\", content, true, {});","export * from \"-!../node_modules/vue-style-loader/index.js!../node_modules/css-loader/dist/cjs.js!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./gdm-restrict-to.vue?vue&type=style&index=0&id=b8509876&prod&lang=css&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n.gdm-add-role {\\n display: inline-block;\\n font-size: 0.9rem;\\n border:1px solid grey;\\n padding:10px;\\n background: #F3F3F3;\\n margin:5px 0 0 10px;\\n}\\n.gdm-add-role input[type=\\\"text\\\"]{\\n  min-width:80px;\\n  width:80px;\\n  max-width:80px;\\n}\\n.gdm-add-role input[type=\\\"text\\\"],\\n.gdm-add-role select{\\n  line-height:1;\\n  border-radius: 0;\\n   height: 19px;\\n   border-style:inset;\\n   padding: 1px 3px;\\n   box-sizing: border-box;\\n\\n    margin: 0em;\\n    /*font: 400 13.3333px Arial;*/\\n    border-width: 1px;\\n    border-style: inset;\\n    border-color: -internal-light-dark-color(rgb(118, 118, 118), rgb(195, 195, 195));\\n}\\n.gdm-add-role input[type=\\\"button\\\"],\\n.gdm-add-role select {\\n\\n  padding: 0 2px;\\n}\\n.gdm-add-role input[type=\\\"button\\\"] {\\nline-height:1;\\nvertical-align:baseline;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('span',{staticClass:\"gdm-restrict-to\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.current),expression:\"current\"}],attrs:{\"name\":\"s_restrictTo\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.current=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option'),_vm._v(\" \"),_vm._l((_vm.roles),function(role){return _c('option',{domProps:{\"value\":role.index,\"selected\":role.index===_vm.current}},[_vm._v(_vm._s(role.value))])})],2),_vm._v(\" \"),(_vm.mode === 'add')?_c('div',[_c('div',{staticClass:\"gdm-add-role\"},[_vm._v(\"\\n\\t     Nouveau \\n\\t\\t   \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newRole),expression:\"newRole\"}],attrs:{\"type\":\"text\",\"placeholder\":\"ROLE\",\"pattern\":\"[A-Z]{3,10}\"},domProps:{\"value\":(_vm.newRole)},on:{\"input\":function($event){if($event.target.composing)return;_vm.newRole=$event.target.value}}}),_vm._v(\" \"),(_vm.userProviders.length > 0)?_c('span',{attrs:{\"title\":\"Seuls les responsables de ce fournisseur pourront donner ce rôle à un utilisateur\"}},[_vm._v(\"\\n\\t\\t     associé à \\n\\t\\t\\t   \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedProvider),expression:\"selectedProvider\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selectedProvider=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.userProviders),function(provider){return _c('option',{domProps:{\"value\":provider.id}},[_vm._v(_vm._s(provider.name))])}),0)]):_vm._e(),_vm._v(\" \"),_c('div',[_vm._v(\"Description:\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-left\":\"5px\"}},[_c('span',{staticStyle:{\"vertical-align\":\"top\"}},[_vm._v(\"fr: \")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.description['fr']),expression:\"description['fr']\"}],domProps:{\"value\":(_vm.description['fr'])},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.description, 'fr', $event.target.value)}}}),_vm._v(\" \"),_c('span',{staticStyle:{\"vertical-align\":\"top\"}},[_vm._v(\"en: \")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.description['en']),expression:\"description['en']\"}],domProps:{\"value\":(_vm.description['en'])},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.description, 'en', $event.target.value)}}})]),_vm._v(\" \"),_c('div',{staticStyle:{\"float\":\"right\",\"padding\":\"10px 0\"}},[_c('input',{attrs:{\"type\":\"button\",\"value\":\"Ajouter\"},on:{\"click\":_vm.addRole}}),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"button\",\"value\":\"Annuler\"},on:{\"click\":_vm.cancel}})]),_vm._v(\" \"),_c('div',{staticStyle:{\"clear\":\"right\",\"color\":\"darkred\",\"font-style\":\"italic\"}},[_vm._v(_vm._s(_vm.msg))])])]):_vm._e(),_vm._v(\" \"),(_vm.mode !== 'add' && _vm.userProviders.length > 0)?_c('input',{attrs:{\"type\":\"button\",\"value\":\"Nouveau Rôle\"},on:{\"click\":function($event){_vm.mode='add'}}}):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./gdm-restrict-to.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./gdm-restrict-to.vue?vue&type=script&lang=js&\"","\n<template>\n <span class=\"gdm-restrict-to\">\n  <select name=\"s_restrictTo\" v-model=\"current\">\n     <option></option>\n     <option v-for=\"role in roles\" :value=\"role.index\" :selected=\"role.index===current\">{{role.value}}</option>\n   </select>\n   <div  v-if=\"mode === 'add'\">\n\t   <div class=\"gdm-add-role\">\n\t     Nouveau \n\t\t   <input  type=\"text\"  placeholder=\"ROLE\" v-model=\"newRole\" pattern=\"[A-Z]{3,10}\"/>\n\t\t   <span v-if=\"userProviders.length > 0\" title=\"Seuls les responsables de ce fournisseur pourront donner ce rôle à un utilisateur\">\n\t\t     associé à \n\t\t\t   <select v-model=\"selectedProvider\">\n\t\t\t     <option v-for=\"provider in userProviders\" :value=\"provider.id\">{{provider.name}}</option>\n\t\t\t   </select>\n\t\t   </span>\n\t\t   <div>Description:</div>\n\t\t   <div style=\"margin-left:5px;\" >\n\t\t     <span style=\"vertical-align:top;\">fr: </span><textarea v-model=\"description['fr']\"></textarea>\n\t\t     <span style=\"vertical-align:top;\">en: </span><textarea v-model=\"description['en']\"></textarea>\n\t\t   </div>\n\t\t   <div style=\"float:right;padding:10px 0;\">\n\t\t   <input type=\"button\" value=\"Ajouter\"@click=\"addRole\"/>\n\t\t   <input type=\"button\" value=\"Annuler\" @click=\"cancel\"/>\n\t\t   </div>\n\t\t   <div style=\"clear:right;color:darkred;font-style:italic;\">{{msg}}</div>\n\t\t   \n\t   </div>  \n   </div> \n   <input v-if=\"mode !== 'add' && userProviders.length > 0\" type=\"button\" value=\"Nouveau Rôle\" @click=\"mode='add'\"/>\n    </span>\n</template>\n<script>\nexport default {\n  name: 'GdmRestrictTo',\n  components: {\n  },\n  props: {\n    selected: {\n      type: String,\n      default: null\n    },\n    url: {\n      type: String,\n      default: null\n    }\n  },\n  created () {\n    this.current = this.selected\n    this.initialize()\n    \n  },\n  mounted () {\n    this.current = this.selected\n  },\n  destroyed () {\n  },\n\n  data() {\n    return {\n      roles: [],\n      current: null,\n      mode: null,\n      newRole: null,\n      providers: [],\n      userProviders: [],\n      selectedProvider: null,\n      description: {fr: '', en: ''},\n      msg: null\n    }\n  }, \n  methods: {\n    addNewRole (data) {\n      if (data.error) {\n        this.msg = data.error\n        return\n      }\n      if (data.success) {\n        this.msg = null\n        this.mode = null\n        var value = this.newRole\n        if (this.selectedProvider) {\n          var pid = this.selectedProvider\n          var provider = this.providers.find(pvd => {return pvd.id === pid})\n          value += ' (' + provider.name + ')'\n        }\n        this.roles.push({index:this.newRole, value: value})\n        this.selectedProvider = null\n        \n        this.current = this.newRole\n        this.newRole = null\n      }\n    },\n    addRole () {\n      console.log(this.description)\n      this.$http.post(this.url + 'roles/addService', \n        {\n          role: this.newRole,\n          provider: this.selectedProvider,\n          description_fr: this.description.fr,\n          description_en: this.description.en\n        },\n        {credentials: true, emulateJSON: true}\n      ).then(function (resp) {\n        this.addNewRole(resp.body)\n      }, resp => console.log('error server'))\n    },\n    cancel () {\n      this.msg = null\n      this.mode = null\n    },\n    getRoles () {\n      this.$http.get(this.url + 'roles/getService', {credentials: true})\n      .then(resp => this.initRoles(resp.body), resp => console.log('error roles not found'))\n    },\n    getUserProviders () {\n      this.$http.get(this.url + 'api/getUserProviders', {credentials: true})\n      .then(function (resp) {\n        this.providers = resp.body\n        this.userProviders = this.providers.filter(provider => {return provider.checked})\n        if (this.userProviders.length > 0) {\n          this.selectedProvider = this.userProviders[0].id\n        }\n        this.getRoles()\n      }, resp => console.log('error providers'))\n    },\n    initialize () {\n      this.description['fr'] = ''\n      this.description['en'] = ''\n      this.getUserProviders()\n    },\n    initRoles (data) {\n      var _this = this\n      data.forEach(function (role) {\n        if (role.r_id !== 'PRIME') {\n          var value = role.r_id\n          if (role.r_fk_provider_id) {\n            var provider = _this.providers.find(pvd => {return pvd.id === role.r_fk_provider_id})\n            value += ' (' + provider.name + ')'\n          }\n          _this.roles.push({index: role.r_id, value: value})\n        }\n      })\n    }\n  }\n}\n</script>\n<style>\n.gdm-add-role {\n display: inline-block;\n font-size: 0.9rem;\n border:1px solid grey;\n padding:10px;\n background: #F3F3F3;\n margin:5px 0 0 10px;\n}\n.gdm-add-role input[type=\"text\"]{\n  min-width:80px;\n  width:80px;\n  max-width:80px;\n}\n.gdm-add-role input[type=\"text\"],\n.gdm-add-role select{\n  line-height:1;\n  border-radius: 0;\n   height: 19px;\n   border-style:inset;\n   padding: 1px 3px;\n   box-sizing: border-box;\n\n    margin: 0em;\n    /*font: 400 13.3333px Arial;*/\n    border-width: 1px;\n    border-style: inset;\n    border-color: -internal-light-dark-color(rgb(118, 118, 118), rgb(195, 195, 195));\n  \n}\n.gdm-add-role input[type=\"button\"],\n.gdm-add-role select {\n\n  padding: 0 2px;\n}\n.gdm-add-role input[type=\"button\"] {\nline-height:1;\nvertical-align:baseline;\n}\n</style>","import { render, staticRenderFns } from \"./gdm-restrict-to.vue?vue&type=template&id=b8509876&\"\nimport script from \"./gdm-restrict-to.vue?vue&type=script&lang=js&\"\nexport * from \"./gdm-restrict-to.vue?vue&type=script&lang=js&\"\nimport style0 from \"./gdm-restrict-to.vue?vue&type=style&index=0&id=b8509876&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}