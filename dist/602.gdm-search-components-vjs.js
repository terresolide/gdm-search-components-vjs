(self.webpackChunkgdm_search_components_vjs=self.webpackChunkgdm_search_components_vjs||[]).push([[602],{3256:(e,i,t)=>{(i=t(6314)(!1)).push([e.id,'\n.gdm-sar-visu div[id="fmtLargeMap"] {\n  width:calc(100% - 6px);\n  top:-3px;\n  left:-2px;\n  margin-bottom:0px;\n  position:fixed;\n  z-index:3000;\n}\n.gdm-sar-visu div.gdm-map {\n  max-height:500px;\n}\n.gdm-sar-visu div[id="fmtMap"].mtdt-small{\n   max-height:500px;\n}\n.gdm-sar-visu div[id="fmtMap"] {\n  min-height:50vh;\n  height:500px;\n  border: 4px solid lightgrey;\n}\n.gdm-sar-visu div[id="fmtLargeMap"] .gdm-serie-navigation {\n   position: absolute;\n   bottom: 5px;\n   left: 50%;\n   transform: translate(-50%, 0);\n   z-index: 10000;\n}\n.gdm-sar-visu .gdm-process-result > div {\n  display:block;\n  margin-top:20px;\n}\n.gdm-sar-visu h4 {\n   padding:10px 0;\n}\n.gdm-sar-visu div.gdm-mouseposition {\n  font-size:14px;\n  left:120px;\n}\n.gdm-sar-visu a.button{\n   display: inline-block;\n\n   margin: 0px 7px 3px 0;\n   padding: 3px 12px;\n   height: auto;\n   line-height: 1.43;\n   white-space: normal;\n   text-align: center;\n   background: #ececea;\n   border-width: 1px;\n   border-style: solid;\n   border-radius: 3px;\n   border-color: #ffffff #d4d4cf #d4d4cf;\n   color: #000;\n   text-decoration: none;\n  /* text-shadow: 0 -1px 1px #bcbcb4, 1px 0 1px #d4d4cf, 0 1px 1px #d4d4cf, -1px 0 1px #bcbcb4;*/\n   vertical-align: top;\n   cursor: pointer;\n   pointer-events: auto;\n   box-sizing: border-box;\n   box-shadow: 0 1px 5px rgba(0, 0, 0, 0.65);\n   opacity: 0.8;\n}\n.gdm-sar-visu a.button:hover{\n   background: #f0f0e6;\n   text-decoration: none;\n   opacity: 1\n}\n.gdm-sar-visu a.button:disabled,\n .gdm-sar-visu a.button.disabled {\n    color: #999;\n    pointer-events: none;\n}\n',""]),e.exports=i},3602:(e,i,t)=>{"use strict";t.r(i),t.d(i,{default:()=>m});var s=t(5182),n=t(5694),r=t(249);const o={name:"GdmProcessSar",components:{GdmMap:s.A,GdmProcessResult:r.A,GdmSerieNavigation:n.A},props:{url:{type:String,default:null},title:{type:String,default:null},color:{type:String,default:"#191970"},lang:{type:String,default:"fr"}},computed:{theTitle:function(){return this.title?this.title:this.$i18n.t("title")}},data:function(){return{bbox:null,series:null,serieName:null,serieIndex:null,imageLayers:[],mouseposition:null,loadingLayer:!1,result:{}}},created:function(){this.$i18n.locale=this.lang},mounted:function(){this.load()},methods:{load:function(){var e=this;this.url&&this.$http.get(this.url).then((function(i){e.treatment(i)}),(function(e){alert("Loaded result failed: "+e.status)}))},mousemove:function(e){this.mouseposition=e},dateSerieChange:function(e){console.log(e),this.serieIndex=e},loadingChange:function(e){this.loadingLayer=e},treatment:function(e){this.result=e.body,console.log(e.body);var i=this.result.dir;if(console.log(this.result.footprint),this.bbox={type:"Feature",geometry:{type:"Polygon",coordinates:[this.result.footprint]}},e.body.commons){var t=this.$i18n.t("commons");for(var s in e.body.commons)if(s.indexOf("geo")>=0){console.log(e.body.commons[s]);var n=this.createSarImage(s,e.body.commons[s],t,"image");console.log(n),t=null,this.imageLayers.push(n)}}if(e.body.interferograms)for(var s in t=this.$i18n.t("interferograms"),e.body.interferograms)if(s.indexOf("geo")>=0){n={first:t,type:"list",checked:!1,title:s,name:s,bbox:this.result.bbox},t=null;var r=[];for(var o in e.body.interferograms[s])r.push({startDate:e.body.interferograms[s][o].startDate,completionDate:e.body.interferograms[s][o].completionDate,png:i+e.body.interferograms[s][o].png});n.png=i+e.body.interferograms[s][0].png,n.legend=i+e.body.interferograms[s][0].legend,this.series||(this.series={}),this.series[s]={images:r},this.imageLayers.push(n)}if(e.body.series)for(var s in t=this.$i18n.t("time_serie"),e.body.series)if(s.indexOf("geo")>=0){if(this.series||(this.series={}),(n=e.body.series[s]).type="serie",e.body.series[s].serie){for(var o in r=[],e.body.series[s].serie)r.push({date:e.body.series[s].serie[o].date,png:i+e.body.series[s].serie[o].png});r.length>0&&(this.series[s]={images:r},delete n.serie)}n.checked=!1,n.png=i+n.png,n.tif=i+(n.tif||n.tiff),n.legend=i+n.legend,n.title=s,n.name=s,n.first=t,t=null,n.bbox||(n.bbox=this.result.bbox),this.imageLayers.push(n)}},createSarImage:function(e,i,t,s){var n=this.result.dir;return i.title=e,i.bbox||(i.bbox=this.result.bbox),i.type="image",i.legend&&(i.legend=n+i.legend),i.png&&(i.png=n+i.png),i.tif=n+(i.tif||i.tiff),t&&(i.first=t),i.checked=!1,i},toggleImage:function(e){if(this.imageLayers&&"undefined"!==this.imageLayers){var i=this.imageLayers[e.index];e.hasOwnProperty("indexImage")?i.checked&&i.indexImage===e.indexImage?i.checked=!1:(i.checked=!0,i.indexImage=e.indexImage):(i.checked=!i.checked,this.serieName=i.title),this.$set(this.imageLayers,e.index,i),this.$refs.map.toggleImageLayer(e,i.checked)}},imageAdded:function(e){var i=e.index,t=this.imageLayers[i];t.checked=!0,"serie"===t.type||"list"===t.type?this.serieName=t.title:this.serieName=null,this.$set(this.imageLayers,i,t)},imageRemoved:function(e){var i=this.imageLayers[e];i.checked=!1,this.$set(this.imageLayers,e,i)}}};t(4149);var a=t(4486),d=t(8482);const l=t.n(d)();var g=(0,a.A)(o,(function(){var e=this,i=e._self._c;return i("span",{staticClass:"gdm-sar-visu"},[i("div",{attrs:{id:"fmtLargeMap"}},[e.series?i("gdm-serie-navigation",{attrs:{series:e.series,"serie-index":e.serieIndex,"serie-name":e.serieName,color:e.color,lang:e.lang,fullscreen:!0,loading:e.loadingLayer},on:{dateChange:e.dateSerieChange}}):e._e(),e._v(" "),e.mouseposition?i("div",{staticClass:"gdm-mouseposition"},[e._v(e._s(e.mouseposition))]):e._e()],1),e._v(" "),i("div",[i("h2",{style:{color:e.color}},[e._v(e._s(e.theTitle))]),e._v(" "),i("div",[i("div",{staticStyle:{width:"45%",display:"inline-block","text-align":"left",float:"right","vertical-align":"top"}},[i("gdm-process-result",{attrs:{result:e.result,series:e.series,"service-name":"GDM-SAR",lang:e.lang,color:e.color,images:e.imageLayers,"serie-index":e.serieIndex},on:{toggleImage:e.toggleImage,dateSerieChange:e.dateSerieChange}})],1),e._v(" "),i("div",{staticStyle:{"max-width":"50%",height:"500px"}},[i("gdm-map",{ref:"map",attrs:{bbox:e.bbox,images:e.imageLayers,series:e.series,"serie-index":e.serieIndex,lang:e.lang,fullscreen:"fmtLargeMap","remove-height":8},on:{imageAdded:e.imageAdded,loadingLayer:e.loadingChange,dateChange:e.dateSerieChange,imageRemoved:e.imageRemoved,mousemove:e.mousemove}})],1)])])])}),[],!1,null,null,null);"function"==typeof l&&l(g);const m=g.exports},4149:(e,i,t)=>{var s=t(3256);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,t(534).A)("753a4046",s,!0,{})},8482:e=>{e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"fr":{"commons":"Produits communs","interferograms":"Interférogrammes","time_serie":"Séries temporelles","title":"Visualisation des résultats"},"en":{"commons":"Common products","interferograms":"Interferograms","time_serie":"Time series","title":"Result vizualisation"}}'),delete e.options._Ctor}}}]);
//# sourceMappingURL=602.gdm-search-components-vjs.js.map